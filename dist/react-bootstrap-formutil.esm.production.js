import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as o,isValidElement as i,createContext as a,Fragment as c}from"react";import{FormControl as l,FormLabel as u,InputGroup as s,FormGroup as f,FormSelect as p,ToggleButtonGroup as d,ToggleButton as v,FormCheck as m,FloatingLabel as y,Col as h,Row as b,FormText as g}from"react-bootstrap";import O from"react-is";import P from"react-fast-compare";function k(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function E(e){"@babel/helpers - typeof";return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,r){if(E(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(E(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function w(e){var r=j(e,"string");return E(r)==="symbol"?r:String(r)}function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach((function(r){k(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,i;for(i=0;i<n.length;i++){o=n[i];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function $(e,r){if(e==null)return{};var t=S(e,r);var n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++){n=i[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function V(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function F(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function T(e,r,t){if(r)F(e.prototype,r);if(t)F(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function x(e,r){x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(r,t){r.__proto__=t;return r};return x(e,r)}function R(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(r)x(e,r)}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(r){return r.__proto__||Object.getPrototypeOf(r)};return B(e)}function N(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function A(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function D(e,r){if(r&&(E(r)==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return A(e)}function I(e){var r=N();return function t(){var n=B(e),o;if(r){var i=B(this).constructor;o=Reflect.construct(n,arguments,i)}else{o=n.apply(this,arguments)}return D(this,o)}}var L=function(e){R(o,e);var r=I(o);function o(){V(this,o);return r.apply(this,arguments)}T(o,[{key:"render",value:function e(){var r=this.props,o=r.children,i=r.name,a=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){var t=r.target,n=t.checked,o=t.value;var i=c||[];a(n?i.concat(o):i.filter((function(e){return e!==o})))};return t.map(o,(function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:!!c&&c.indexOf(r)>-1,onChange:p,onFocus:l,onBlur:u,name:i})}))}}]);return o}(o);L.formutilType="array";var Y=L;var G;try{var U=document.createElement("style");U.type="text/css";document.getElementsByTagName("head")[0].appendChild(U);G=document.styleSheets[document.styleSheets.length-1]}catch(e){}function H(e,r){if(G){if(G.insertRule){G.insertRule("".concat(e," { ").concat(r," }"),0)}else if(G.addRule){G.addRule(e,r,0)}}}var z=["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","floatingLabel","extra","noStyle","errorLevel"];var M=O.isValidElementType;var W=a({}),q=W.Consumer,J=W.Provider;var K=1;var Q=function e(r){K=r};var X=l.Feedback;function Z(e){if(e){var r=e.type;if(M(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var ee=function(o){R(O,o);var a=I(O);function O(){var e;V(this,O);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}e=a.call.apply(a,[this].concat(n));e.fields={};e.registerField=function(r,t){return t?e.fields[r]=t:delete e.fields[r]};e.latestValidationProps=null;e.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};e.fetchCurrentValidationProps=function(r){var t=Object.keys(e.fields).map((function(r){return e.fields[r].$new()}));var n=t.filter((function(e){return e.$invalid}));var o=n.length>0;var i=t.some((function(e){return e.$dirty}));var a=t.some((function(e){return e.$touched}));var c=t.some((function(e){return e.$focused}));var l=n.map((function(t){var n=t.$invalid,o=t.$focused,i=t.$touched,a=t.$dirty,c=t.$getFirstError;var l=e.checkHasError(r,n,a,i,o);return l&&c()})).filter(Boolean);return e.getValidationProps(r,o,i,a,c,l)};e.getValidationProps=function(t,n,o,i,a,c){var l=e.checkHasError(t,n,o,i,a);var u={className:[e.props.className,l&&"has-error",n?"is-invalid":"is-valid",o?"is-dirty":"is-pristine",i?"is-touched":"is-untouched",a?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var s={};if(l){s.isInvalid=true}if(e.props.feedback&&!n){s.isValid=true}return{groupProps:u,validationProps:s,error:l?r.createElement(X,{type:"invalid"},Array.isArray(c)?c.map((function(e,t){return r.createElement("div",{key:t},e)})):c):null}};return e}T(O,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function o(){var a=this;var O=this.props;var E=O.children,j=O.addons,_=O.label,S=O.helper,V=O.labelCol,F=O.wrapperCol;O.validationState;O.className;var T=O.as;O.feedback;var x=O.floatingLabel,R=O.extra,B=O.noStyle,N=O.errorLevel,A=N===void 0?K:N,D=$(O,z);var I=F?h:c;var L=!T&&(V||F)?b:T;if(_){if(i(_)){if(V){_=n(_,C({column:true},V))}}else{_=r.createElement(u,Object.assign({column:!!V},V),_)}}var G=j?s:c;var U=j?{size:j.size}:undefined;if(j){if(j.pre){j.pre=i(j.pre)?j.pre:r.createElement(s.Text,null,j.pre)}if(j.end){j.end=i(j.end)?j.end:r.createElement(s.Text,null,j.end)}}else{j={}}if(S&&!i(S)){S=r.createElement(g,{muted:true},S)}if(!O.name){var H=this.latestValidationProps=this.fetchCurrentValidationProps(A),M=H.groupProps,W=H.error;Promise.resolve().then((function(){if(!P(a.latestValidationProps,a.fetchCurrentValidationProps(A))){a.forceUpdate()}}));var Q=typeof E==="function"?E():E;return r.createElement(J,{value:this.registerField},r.createElement(f,Object.assign({},D,M,{as:L}),_,r.createElement(I,F,r.createElement(G,U,j.pre,Q,j.end),W||S),R))}if(D.$memo===true){D.__DIFF__={childList:E,compositionValue:this.compositionValue}}else if(Array.isArray(D.$memo)){D.$memo=D.$memo.concat(this.compositionValue)}var X=typeof E==="function"?E:t.only(E);var ee=Z(X);if((ee===l&&X.props.as==="select"||ee===p)&&X.props.multiple){ee="multipleSelect"}switch(ee){case m:case v:case"checkbox":case"radio":D.__TYPE__="checked";break;case"multipleSelect":D.__TYPE__="array";break;case Y:case d:if(X.props.type!=="radio"){D.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":D.__TYPE__=ee;break}return r.createElement(e,Object.assign({},D,{passUtil:"$fieldutil",render:function e(t){var o,i;var c=O.valuePropName,l=c===void 0?"value":c,u=O.changePropName,s=u===void 0?"onChange":u,p=O.focusPropName,d=p===void 0?"onFocus":p,v=O.blurPropName,m=v===void 0?"onBlur":v;var h=t.$fieldutil,b=t[s],g=t[d],P=t[m],E=t[l],C=$(t,["$fieldutil",s,d,m,l].map(w));var V=h.$invalid,T=h.$dirty,N=h.$touched,Y=h.$focused,H=h.$getFirstError;var z;switch(D.__TYPE__){case"checked":case"checkbox":case"radio":var M=O.checked,W=M===void 0?true:M,J=O.unchecked,K=J===void 0?false:J;z={checked:E===W,onChange:function e(r){var t=r&&r.target?r.target.checked:r;b(t?W:K,r)}};break;default:z=(o={onCompositionEnd:function e(r){a.isComposing=false;delete a.compositionValue;b(r)},onCompositionStart:function e(){return a.isComposing=true}},k(o,s,ee==="multipleSelect"?function(e){b([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(a.isComposing){a.compositionValue=e.target[l];a.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}b.apply(void 0,[e].concat(t))}}),k(o,l,"compositionValue"in a?a.compositionValue:E),k(o,m,(function(){if(a.isComposing){a.isComposing=false;delete a.compositionValue;b.apply(void 0,arguments)}return P.apply(void 0,arguments)})),k(o,"name",D.name),o);break}var Q=a.getValidationProps(A,V,T,N,Y,H()),Z=Q.groupProps,re=Q.validationProps,te=Q.error;z=Object.assign((i={},k(i,d,g),k(i,m,P),i),z,re);var ne=typeof X==="function"?X(z):n(X,z);return r.createElement(q,null,(function(e){if(B){a.$fieldutil=h;a.registerAncestorField=e;return ne}return r.createElement(f,Object.assign({},C,Z,{as:L}),!x&&_,r.createElement(I,F,r.createElement(G,U,j.pre,x&&_?r.createElement(y,{label:_.props.children},ne):ne,j.end),te||S),R)}))}}))}}]);return O}(o);var re=ee;H(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");H(".has-error .invalid-feedback","display: block");var te=function(e){R(o,e);var r=I(o);function o(){V(this,o);return r.apply(this,arguments)}T(o,[{key:"render",value:function e(){var r=this.props,o=r.children,i=r.name,a=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){a(r.target.value,r)};return t.map(o,(function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:c===r,onChange:p,onFocus:l,onBlur:u,name:i})}))}}]);return o}(o);var ne=te;export{Y as CheckboxGroup,re as FormGroup,ne as RadioGroup,Y as SwitchGroup,Q as setErrorLevel};
