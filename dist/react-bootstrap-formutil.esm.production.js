import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as o,isValidElement as i,createContext as a,Fragment as c}from"react";import{FormControl as l,FormLabel as u,InputGroup as s,FormGroup as f,ToggleButtonGroup as p,ToggleButton as d,FormCheck as v,Col as m,Row as y,FormText as h}from"react-bootstrap";import b from"react-is";import g from"react-fast-compare";function O(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function P(e){"@babel/helpers - typeof";return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function k(e,r){if(P(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(P(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function E(e){var r=k(e,"string");return P(r)==="symbol"?r:String(r)}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){O(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,i;for(i=0;i<n.length;i++){o=n[i];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function C(e,r){if(e==null)return{};var t=_(e,r);var n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++){n=i[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function S(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function $(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function V(e,r,t){if(r)$(e.prototype,r);if(t)$(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function x(e,r){x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(r,t){r.__proto__=t;return r};return x(e,r)}function F(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(r)x(e,r)}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(r){return r.__proto__||Object.getPrototypeOf(r)};return T(e)}function N(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function R(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function A(e,r){if(r&&(P(r)==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return R(e)}function B(e){var r=N();return function t(){var n=T(e),o;if(r){var i=T(this).constructor;o=Reflect.construct(n,arguments,i)}else{o=n.apply(this,arguments)}return A(this,o)}}var D=function(e){F(o,e);var r=B(o);function o(){S(this,o);return r.apply(this,arguments)}V(o,[{key:"render",value:function e(){var r=this.props,o=r.children,i=r.name,a=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){var t=r.target,n=t.checked,o=t.value;var i=c||[];a(n?i.concat(o):i.filter((function(e){return e!==o})))};return t.map(o,(function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:!!c&&c.indexOf(r)>-1,onChange:p,onFocus:l,onBlur:u,name:i})}))}}]);return o}(o);D.formutilType="array";var I=D;var Y;try{var G=document.createElement("style");G.type="text/css";document.getElementsByTagName("head")[0].appendChild(G);Y=document.styleSheets[document.styleSheets.length-1]}catch(e){}function U(e,r){if(Y){if(Y.insertRule){Y.insertRule("".concat(e," { ").concat(r," }"),0)}else if(Y.addRule){Y.addRule(e,r,0)}}}var H=["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"];var L=b.isValidElementType;var z=a({}),M=z.Consumer,W=z.Provider;var q=1;var J=function e(r){q=r};var K=l.Feedback;function Q(e){if(e){var r=e.type;if(L(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var X=function(o){F(b,o);var a=B(b);function b(){var e;S(this,b);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}e=a.call.apply(a,[this].concat(n));e.fields={};e.registerField=function(r,t){return t?e.fields[r]=t:delete e.fields[r]};e.latestValidationProps=null;e.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};e.fetchCurrentValidationProps=function(r){var t=Object.keys(e.fields).map((function(r){return e.fields[r].$new()}));var n=t.filter((function(e){return e.$invalid}));var o=n.length>0;var i=t.some((function(e){return e.$dirty}));var a=t.some((function(e){return e.$touched}));var c=t.some((function(e){return e.$focused}));var l=n.map((function(t){var n=t.$invalid,o=t.$focused,i=t.$touched,a=t.$dirty,c=t.$getFirstError;var l=e.checkHasError(r,n,a,i,o);return l&&c()})).filter(Boolean);return e.getValidationProps(r,o,i,a,c,l)};e.getValidationProps=function(t,n,o,i,a,c){var l=e.checkHasError(t,n,o,i,a);var u={className:[e.props.className,l&&"has-error",n?"is-invalid":"is-valid",o?"is-dirty":"is-pristine",i?"is-touched":"is-untouched",a?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var s={};if(l){s.isInvalid=true}if(e.props.feedback&&!n){s.isValid=true}return{groupProps:u,validationProps:s,error:l?r.createElement(K,{type:"invalid"},Array.isArray(c)?c.map((function(e,t){return r.createElement("div",{key:t},e)})):c):null}};return e}V(b,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function o(){var a=this;var b=this.props;var P=b.children,k=b.addons,j=b.label,_=b.helper,S=b.labelCol,$=b.wrapperCol;b.validationState;b.className;var V=b.as;b.feedback;var x=b.extra,F=b.noStyle,T=b.errorLevel,N=T===void 0?q:T,R=C(b,H);var A=$?m:c;var B=!V&&(S||$)?y:V;if(j){if(i(j)){if(S){j=n(j,w({column:true},S))}}else{j=r.createElement(u,Object.assign({column:!!S},S),j)}}var D=k?s:c;var Y=k?{size:k.size}:undefined;if(k){if(k.pre){k.pre=r.createElement(s.Prepend,null,i(k.pre)?k.pre:r.createElement(s.Text,null,k.pre))}if(k.end){k.end=r.createElement(s.Append,null,i(k.end)?k.end:r.createElement(s.Text,null,k.end))}}else{k={}}if(_&&!i(_)){_=r.createElement(h,{className:"text-muted"},_)}if(!b.name){var G=this.latestValidationProps=this.fetchCurrentValidationProps(N),U=G.groupProps,L=G.error;Promise.resolve().then((function(){if(!g(a.latestValidationProps,a.fetchCurrentValidationProps(N))){a.forceUpdate()}}));return r.createElement(W,{value:this.registerField},r.createElement(f,Object.assign({},R,U,{as:B}),j,r.createElement(A,$,r.createElement(D,Y,k.pre,typeof P==="function"?P():P,k.end),L||_),x))}if(R.$memo===true){R.__DIFF__={childList:P,compositionValue:this.compositionValue}}else if(Array.isArray(R.$memo)){R.$memo=R.$memo.concat(this.compositionValue)}var z=typeof P==="function"?P:t.only(P);var J=Q(z);if(J===l){if(z.props.as==="select"&&z.props.multiple){J="multipleSelect"}}switch(J){case v:case d:case"checkbox":case"radio":R.__TYPE__="checked";break;case"multipleSelect":R.__TYPE__="array";break;case I:case p:if(z.props.type!=="radio"){R.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":R.__TYPE__=J;break}return r.createElement(e,Object.assign({},R,{passUtil:"$fieldutil",render:function e(t){var o,i;var c=b.valuePropName,l=c===void 0?"value":c,u=b.changePropName,s=u===void 0?"onChange":u,p=b.focusPropName,d=p===void 0?"onFocus":p,v=b.blurPropName,m=v===void 0?"onBlur":v;var y=t.$fieldutil,h=t[s],g=t[d],P=t[m],w=t[l],S=C(t,["$fieldutil",s,d,m,l].map(E));var V=y.$invalid,T=y.$dirty,I=y.$touched,G=y.$focused,U=y.$getFirstError;var H;switch(R.__TYPE__){case"checked":case"checkbox":case"radio":var L=b.checked,W=L===void 0?true:L,q=b.unchecked,K=q===void 0?false:q;H={checked:w===W,onChange:function e(r){var t=r&&r.target?r.target.checked:r;h(t?W:K,r)}};break;default:H=(o={onCompositionEnd:function e(r){a.isComposing=false;delete a.compositionValue;h(r)},onCompositionStart:function e(){return a.isComposing=true}},O(o,s,J==="multipleSelect"?function(e){h([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(a.isComposing){a.compositionValue=e.target[l];a.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}h.apply(void 0,[e].concat(t))}}),O(o,l,"compositionValue"in a?a.compositionValue:w),O(o,m,(function(){if(a.isComposing){a.isComposing=false;delete a.compositionValue;h.apply(void 0,arguments)}return P.apply(void 0,arguments)})),O(o,"name",R.name),o);break}var Q=a.getValidationProps(N,V,T,I,G,U()),X=Q.groupProps,Z=Q.validationProps,ee=Q.error;H=Object.assign((i={},O(i,d,g),O(i,m,P),i),H,Z);var re=typeof z==="function"?z(H):n(z,H);return r.createElement(M,null,(function(e){if(F){a.$fieldutil=y;a.registerAncestorField=e;return re}return r.createElement(f,Object.assign({},S,X,{as:B}),j,r.createElement(A,$,r.createElement(D,Y,k.pre,re,k.end),ee||_),x)}))}}))}}]);return b}(o);var Z=X;U(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");U(".has-error .invalid-feedback","display: block");var ee=function(e){F(o,e);var r=B(o);function o(){S(this,o);return r.apply(this,arguments)}V(o,[{key:"render",value:function e(){var r=this.props,o=r.children,i=r.name,a=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){a(r.target.value,r)};return t.map(o,(function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:c===r,onChange:p,onFocus:l,onBlur:u,name:i})}))}}]);return o}(o);var re=ee;export{I as CheckboxGroup,Z as FormGroup,re as RadioGroup,I as SwitchGroup,J as setErrorLevel};
