import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as a,isValidElement as i,Fragment as o}from"react";import{isValidElementType as c}from"react-is";import{Form,FormControl,FormLabel,InputGroup,FormText,FormGroup,FormCheck,ToggleButton,ToggleButtonGroup,Col,Row}from"react-bootstrap";function l(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);return e}function f(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable});t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){p(t,true).forEach(function(r){f(e,r,t[r])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{p(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}}return e}function v(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)b(e,r)}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return m(e)}function b(e,r){b=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return b(e,r)}function y(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var a,i;for(i=0;i<n.length;i++){a=n[i];if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}function h(e,r){if(e==null)return{};var t=y(e,r);var n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++){n=i[a];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return g(e)}function k(e,r){if(typeof e!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function j(e){var r=k(e,"string");return typeof r==="symbol"?r:String(r)}var E=function(e){v(r,e);function r(){l(this,r);return O(this,m(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,a=r.children,i=r.name,o=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){var t=r.target,n=t.checked,a=t.value;var i=c||[];o(n?i.concat(a):i.filter(function(e){return e!==a}))};return t.map(a,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:!!c&&c.indexOf(r)>-1,onChange:p,onFocus:l,onBlur:u,name:i})})}}]);return r}(a);var P;try{var _=document.createElement("style");_.type="text/css";document.getElementsByTagName("head")[0].appendChild(_);P=document.styleSheets[document.styleSheets.length-1]}catch(e){}function w(e,r){if(P){if(P.insertRule){P.insertRule("".concat(e," { ").concat(r," }"),0)}else if(P.addRule){P.addRule(e,r,0)}}}var C=1;var S=function e(r){C=r};var x=Form.displayName!=="Form";var N=x?FormControl:"FormControl";var T=x?FormCheck:"FormCheck";var F=x?E:"CheckboxGroup";var B=x?ToggleButton:"ToggleButton";var V=x?ToggleButtonGroup:"ToggleButtonGroup";var $=FormControl.Feedback;function I(e){if(e){var r=e.type;if(typeof r!=="string"&&c(r)){if(r.formutilType){return r.formutilType}if(x){return r}return r.displayName||r.name}return e.props.type||e.type}}var R=function(a){v(c,a);function c(){l(this,c);return O(this,m(c).apply(this,arguments))}s(c,[{key:"render",value:function a(){var c=this;var l=this.props;var u=l.children,s=l.addons,p=l.label,v=l.helper,m=l.labelCol,b=l.wrapperCol,y=l.validationState,g=l.className,O=l.feedback,k=l.extra,E=l.errorLevel,P=E===void 0?C:E,_=h(l,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","feedback","extra","errorLevel"]);var w=t.only(u);var S=b?Col:o;var x={className:g};if(p){if(i(p)){if(m){p=n(p,d({column:true},m))}}else{p=r.createElement(FormLabel,Object.assign({column:!!m},m),p)}}if(m||b){x.as=Row}var R=s?InputGroup:o;var Y=s?{size:s.size}:undefined;if(s){if(s.pre){s.pre=r.createElement(InputGroup.Prepend,null,i(s.pre)?s.pre:r.createElement(InputGroup.Text,null,s.pre))}if(s.end){s.end=r.createElement(InputGroup.Append,null,i(s.end)?s.end:r.createElement(InputGroup.Text,null,s.end))}}else{s={}}if(v&&!i(v)){v=r.createElement(FormText,{className:"text-muted"},v)}var D=I(w);if(D===N){if(w.props.as==="select"&&w.props.multiple){D="multipleSelect"}}switch(D){case T:case B:case"checkbox":case"radio":_.__TYPE__="checked";break;case"multipleSelect":_.__TYPE__="array";break;case F:case V:if(w.props.type!=="radio"){_.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":_.__TYPE__=D;break}return r.createElement(e,Object.assign({},_,{passUtil:"$fieldutil",render:function e(t){var a,i;var o=l.valuePropName,u=o===void 0?"value":o,d=l.changePropName,m=d===void 0?"onChange":d,y=l.focusPropName,g=y===void 0?"onFocus":y,E=l.blurPropName,C=E===void 0?"onBlur":E;var N=t.$fieldutil,T=t[m],F=t[g],B=t[C],V=t[u],I=h(t,["$fieldutil",m,g,C,u].map(j));var G=N.$invalid,z=N.$dirty,A=N.$touched,L=N.$focused,U=N.$getFirstError;var q;switch(_.__TYPE__){case"checked":case"checkbox":case"radio":var H=l.checked,J=H===void 0?true:H,K=l.unchecked,M=K===void 0?false:K;q={checked:V===J,onChange:function e(r){var t=r&&r.target?r.target.checked:r;T(t?J:M,r)}};break;default:q=(a={onCompositionEnd:function e(r){c.isComposition=false;delete c.compositionValue;T(r)},onCompositionStart:function e(){return c.isComposition=true}},f(a,m,D==="multipleSelect"?function(e){T([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(c.isComposition){c.compositionValue=e.target[u];c.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}T.apply(void 0,[e].concat(t))}}),f(a,u,"compositionValue"in c?c.compositionValue:V),f(a,"name",_.name),a);break}Object.assign(q,(i={},f(i,g,F),f(i,C,B),i));var Q;switch(P){case 0:Q=G&&z&&A;break;case 1:Q=G&&z;break;case 2:Q=G;break;default:Q=false;break}if(Q){q.isInvalid=true;if(Y){Y.className="is-invalid"}}if(O&&!G){q.isValid=true}x.className=[x.className,Q&&"has-error",G&&"is-invalid",z&&"is-dirty",A&&"is-touched",L&&"is-focused"].filter(Boolean).join(" ");return r.createElement(FormGroup,Object.assign({},I,x),p,r.createElement(S,b,r.createElement(R,Y,s.pre,n(w,q),s.end),Q?r.createElement($,{type:"invalid"},r.createElement(FormText,null,U())):v),k)}}))}}]);return c}(a);w(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");w(".has-error .invalid-feedback","display: block");var Y=function(e){v(r,e);function r(){l(this,r);return O(this,m(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,a=r.children,i=r.name,o=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){o(r.target.value,r)};return t.map(a,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:c===r,onChange:p,onFocus:l,onBlur:u,name:i})})}}]);return r}(a);export{E as CheckboxGroup,R as FormGroup,Y as RadioGroup,E as SwitchGroup,S as setErrorLevel};
