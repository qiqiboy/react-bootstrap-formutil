import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as a,isValidElement as o,Fragment as i}from"react";import{isValidElementType as c}from"react-is";import{Form,FormControl,FormLabel,InputGroup,FormText,FormGroup,FormCheck,ToggleButton,ToggleButtonGroup,Col,Row}from"react-bootstrap";function l(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);return e}function f(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable});t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){p(t,true).forEach(function(r){f(e,r,t[r])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{p(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}}return e}function d(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)b(e,r)}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return m(e)}function b(e,r){b=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return b(e,r)}function y(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var a,o;for(o=0;o<n.length;o++){a=n[o];if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}function h(e,r){if(e==null)return{};var t=y(e,r);var n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++){n=o[a];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return g(e)}function k(e,r){if(typeof e!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function j(e){var r=k(e,"string");return typeof r==="symbol"?r:String(r)}var P=function(e){d(r,e);function r(){l(this,r);return O(this,m(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,a=r.children,o=r.name,i=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){var t=r.target,n=t.checked,a=t.value;var o=c||[];i(n?o.concat(a):o.filter(function(e){return e!==a}))};return t.map(a,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:!!c&&c.indexOf(r)>-1,onChange:p,onFocus:l,onBlur:u,name:o})})}}]);return r}(a);var _=1;var E=function e(r){_=r};var w=Form.displayName!=="Form";var C=w?FormControl:"FormControl";var S=w?FormCheck:"FormCheck";var x=w?P:"CheckboxGroup";var N=w?ToggleButton:"ToggleButton";var T=w?ToggleButtonGroup:"ToggleButtonGroup";var F=FormControl.Feedback;function V(e){if(e){var r=e.type;if(typeof r!=="string"&&c(r)){if(r.formutilType){return r.formutilType}if(w){return r}return r.displayName||r.name}return e.props.type||e.type}}var B=function(a){d(c,a);function c(){l(this,c);return O(this,m(c).apply(this,arguments))}s(c,[{key:"render",value:function a(){var c=this;var l=this.props;var u=l.children,s=l.addons,p=l.label,d=l.helper,m=l.labelCol,b=l.wrapperCol,y=l.validationState,g=l.className,O=l.feedback,k=l.extra,P=l.errorLevel,E=P===void 0?_:P,w=h(l,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","feedback","extra","errorLevel"]);var B=t.only(u);var $=b?Col:i;var I={className:g};if(p){if(o(p)){if(m){p=n(p,v({column:true},m))}}else{p=r.createElement(FormLabel,Object.assign({column:!!m},m),p)}}if(m||b){I.as=Row}var Y=s?InputGroup:i;var D=s?{size:s.size}:undefined;if(s){if(s.pre&&!o(s.pre)){s.pre=r.createElement(InputGroup.Prepend,null,r.createElement(InputGroup.Text,null,s.pre))}if(s.end&&!o(s.end)){s.end=r.createElement(InputGroup.Append,null,r.createElement(InputGroup.Text,null,s.end))}}else{s={}}if(d&&!o(d)){d=r.createElement(FormText,{className:"text-muted"},d)}var G=V(B);if(G===C){if(B.props.as==="select"&&B.props.multiple){G="multipleSelect"}}switch(G){case S:case N:case"checkbox":case"radio":w.__TYPE__="checked";break;case"multipleSelect":w.__TYPE__="array";break;case x:case T:if(B.props.type!=="radio"){w.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":w.__TYPE__=G;break}return r.createElement(e,Object.assign({},w,{passUtil:"$fieldutil",render:function e(t){var a,o;var i=l.valuePropName,u=i===void 0?"value":i,v=l.changePropName,m=v===void 0?"onChange":v,y=l.focusPropName,g=y===void 0?"onFocus":y,P=l.blurPropName,_=P===void 0?"onBlur":P;var C=t.$fieldutil,S=t[m],x=t[g],N=t[_],T=t[u],V=h(t,["$fieldutil",m,g,_,u].map(j));var z=C.$invalid,A=C.$dirty,L=C.$touched,U=C.$focused,R=C.$getFirstError;var q;switch(w.__TYPE__){case"checked":case"checkbox":case"radio":var H=l.checked,J=H===void 0?true:H,K=l.unchecked,M=K===void 0?false:K;q={checked:T===J,onChange:function e(r){var t=r&&r.target?r.target.checked:r;S(t?J:M,r)}};break;default:q=(a={onCompositionEnd:function e(r){c.isComposition=false;delete c.compositionValue;S(r)},onCompositionStart:function e(){return c.isComposition=true}},f(a,m,G==="multipleSelect"?function(e){S([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(c.isComposition){c.compositionValue=e.target[u];c.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}S.apply(void 0,[e].concat(t))}}),f(a,u,"compositionValue"in c?c.compositionValue:T),f(a,"name",w.name),a);break}Object.assign(q,(o={},f(o,g,x),f(o,_,N),o));var Q;switch(E){case 0:Q=z&&A&&L;break;case 1:Q=z&&A;break;case 2:Q=z;break;default:Q=false;break}if(Q){q.isInvalid=true;q.feedback=r.createElement(FormText,null,R());if(D){D.className="is-invalid"}}if(O&&!z){q.isValid=true}I.className=[I.className,Q&&"has-error",z&&"is-invalid",A&&"is-dirty",L&&"is-touched",U&&"is-focused"].filter(Boolean).join(" ");return r.createElement(FormGroup,Object.assign({},V,I),p,r.createElement($,b,r.createElement(Y,D,s.pre,n(B,q),s.end),Q?r.createElement(F,{type:"invalid"},r.createElement(FormText,null,R())):d),k)}}))}}]);return c}(a);var $=function(e){d(r,e);function r(){l(this,r);return O(this,m(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,a=r.children,o=r.name,i=r.onChange,c=r.value,l=r.onFocus,u=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){i(r.target.value,r)};return t.map(a,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:c===r,onChange:p,onFocus:l,onBlur:u,name:o})})}}]);return r}(a);export{P as CheckboxGroup,B as FormGroup,$ as RadioGroup,P as SwitchGroup,E as setErrorLevel};
