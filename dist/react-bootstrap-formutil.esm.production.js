import{EasyField as e}from"react-formutil";export*from"react-formutil";import r,{Children as t,cloneElement as n,Component as o,isValidElement as a,Fragment as i}from"react";import{isValidElementType as c}from"react-is";import{Form,FormControl,FormLabel,InputGroup,FormText,FormGroup,FormCheck,ToggleButton,ToggleButtonGroup,Col,Row}from"react-bootstrap";function u(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,r,t){if(r)l(e.prototype,r);if(t)l(e,t);return e}function f(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable});t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){p(t,true).forEach(function(r){f(e,r,t[r])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{p(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}}return e}function m(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)b(e,r)}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return d(e)}function b(e,r){b=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return b(e,r)}function y(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function h(e,r){if(e==null)return{};var t=y(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return g(e)}function k(e,r){if(typeof e!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function j(e){var r=k(e,"string");return typeof r==="symbol"?r:String(r)}var P=function(e){m(r,e);function r(){u(this,r);return O(this,d(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,o=r.children,a=r.name,i=r.onChange,c=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){var t=r.target,n=t.checked,o=t.value;var a=c||[];i(n?a.concat(o):a.filter(function(e){return e!==o}))};return t.map(o,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:!!c&&c.indexOf(r)>-1,onChange:p,onFocus:u,onBlur:l,name:a})})}}]);return r}(o);var _=1;var w=function e(r){_=r};var E=Form.displayName!=="Form";var C=E?FormControl:"FormControl";var S=E?FormCheck:"FormCheck";var x=E?P:"CheckboxGroup";var T=E?ToggleButton:"ToggleButton";var F=E?ToggleButtonGroup:"ToggleButtonGroup";var N=FormControl.Feedback;function V(e){if(e){var r=e.type;if(typeof r!=="string"&&c(r)){if(r.formutilType){return r.formutilType}if(E){return r}return r.displayName||r.name}return e.props.type||e.type}}var B=function(o){m(c,o);function c(){u(this,c);return O(this,d(c).apply(this,arguments))}s(c,[{key:"render",value:function o(){var c=this;var u=this.props;var l=u.children,s=u.addons,p=u.label,m=u.helper,d=u.labelCol,b=u.wrapperCol,y=u.validationState,g=u.className,O=u.feedback,k=u.extra,P=u.errorLevel,w=P===void 0?_:P,E=h(u,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","feedback","extra","errorLevel"]);var B=t.only(l);var $=b?Col:i;var I={className:g};if(p){if(a(p)){if(d){p=n(p,v({column:true},d))}}else{p=r.createElement(FormLabel,Object.assign({column:!!d},d),p)}}if(d||b){I.as=Row}var Y=s?InputGroup:i;var D=s?{size:s.size}:{};if(s){if(s.pre&&!a(s.pre)){s.pre=r.createElement(InputGroup.Prepend,null,r.createElement(InputGroup.Text,null,s.pre))}if(s.end&&!a(s.end)){s.end=r.createElement(InputGroup.Append,null,r.createElement(InputGroup.Text,null,s.end))}}else{s={}}if(m&&!a(m)){m=r.createElement(FormText,{className:"text-muted"},m)}var G=V(B);if(G===C){if(B.props.as==="select"&&B.props.multiple){G="multipleSelect"}}switch(G){case S:case T:case"checkbox":case"radio":E.__TYPE__="checked";break;case"multipleSelect":E.__TYPE__="array";break;case x:case F:if(B.props.type!=="radio"){E.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":E.__TYPE__=G;break}return r.createElement(e,Object.assign({},E,{passUtil:"$fieldutil",render:function e(t){var o,a;var i=u.valuePropName,l=i===void 0?"value":i,v=u.changePropName,d=v===void 0?"onChange":v,y=u.focusPropName,g=y===void 0?"onFocus":y,P=u.blurPropName,_=P===void 0?"onBlur":P;var C=t.$fieldutil,S=t[d],x=t[g],T=t[_],F=t[l],V=h(t,["$fieldutil",d,g,_,l].map(j));var z=C.$invalid,A=C.$dirty,L=C.$touched,U=C.$getFirstError;var R;switch(E.__TYPE__){case"checked":case"checkbox":case"radio":var q=u.checked,H=q===void 0?true:q,J=u.unchecked,K=J===void 0?false:J;R={checked:F===H,onChange:function e(r){var t=r&&r.target?r.target.checked:r;S(t?H:K,r)}};break;default:R=(o={onCompositionEnd:function e(r){c.isComposition=false;delete c.compositionValue;S(r)},onCompositionStart:function e(){return c.isComposition=true}},f(o,d,G==="multipleSelect"?function(e){S([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(c.isComposition){c.compositionValue=e.target[l];c.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}S.apply(void 0,[e].concat(t))}}),f(o,l,"compositionValue"in c?c.compositionValue:F),f(o,"name",E.name),o);break}Object.assign(R,(a={},f(a,g,x),f(a,_,T),a));var M;switch(w){case 0:M=z&&A&&L;break;case 1:M=z&&A;break;case 2:M=z;break;default:M=false;break}if(M){R.isInvalid=true}if(O&&!z){R.isValid=true}return r.createElement(FormGroup,Object.assign({},V,I),p,r.createElement($,b,r.createElement(Y,D,s.pre,n(B,R),s.end),M?r.createElement(N,{type:"invalid"},r.createElement(FormText,null,U())):m),k)}}))}}]);return c}(o);var $=function(e){m(r,e);function r(){u(this,r);return O(this,d(r).apply(this,arguments))}s(r,[{key:"render",value:function e(){var r=this.props,o=r.children,a=r.name,i=r.onChange,c=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,f=r.isInvalid;var p=function e(r){i(r.target.value,r)};return t.map(o,function(e){var r=e.props.value;return n(e,{isValid:s,isInvalid:f,checked:c===r,onChange:p,onFocus:u,onBlur:l,name:a})})}}]);return r}(o);export{P as CheckboxGroup,B as FormGroup,$ as RadioGroup,P as SwitchGroup,w as setErrorLevel};
