"use strict";Object.defineProperty(exports,"__esModule",{value:true});var e=require("react-formutil");var t=require("react");var r=require("react-bootstrap");var o=require("react-is");var n=require("react-fast-compare");function a(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var i=a(t);var u=a(o);var l=a(n);function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function c(e,t){return t={exports:{}},e(t,t.exports),t.exports}var p=c((function(e){function t(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var f=s(p);var d=c((function(e){function t(r){"@babel/helpers - typeof";return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=true,e.exports["default"]=e.exports,t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(d);var v=d;var m=c((function(e){var t=v["default"];function r(e,r){if(t(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==undefined){var n=o.call(e,r||"default");if(t(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(m);var y=m;var h=c((function(e){var t=v["default"];function r(e){var r=y(e,"string");return t(r)==="symbol"?r:String(r)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var x=s(h);var b=c((function(e){function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var _=s(b);var g=c((function(e){function t(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,a;for(a=0;a<o.length;a++){n=o[a];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(g);var O=g;var P=c((function(e){function t(e,t){if(e==null)return{};var r=O(e,t);var o,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++){o=a[n];if(t.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;r[o]=e[o]}}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var E=s(P);var j=c((function(e){function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var k=s(j);var w=c((function(e){function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function r(e,r,o){if(r)t(e.prototype,r);if(o)t(e,o);Object.defineProperty(e,"prototype",{writable:false});return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var C=s(w);var V=c((function(e){function t(r,o){e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r,o)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(V);var F=V;var S=c((function(e){function t(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)F(e,t)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var $=s(S);var M=c((function(e){function t(r){e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(M);var T=c((function(e){function t(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(T);var B=c((function(e){function t(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(B);var G=B;var I=c((function(e){var t=v["default"];function r(e,r){if(r&&(t(r)==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return G(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(I);var R=M;var N=T;var A=I;var D=c((function(e){function t(e){var t=N();return function r(){var o=R(e),n;if(t){var a=R(this).constructor;n=Reflect.construct(o,arguments,a)}else{n=o.apply(this,arguments)}return A(this,n)}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var q=s(D);var L=function(e){$(o,e);var r=q(o);function o(){k(this,o);return r.apply(this,arguments)}C(o,[{key:"render",value:function e(){var r=this.props,o=r.children,n=r.name,a=r.onChange,i=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,c=r.isInvalid;var p=function e(t){var r=t.target,o=r.checked,n=r.value;var u=i||[];a(o?u.concat(n):u.filter((function(e){return e!==n})))};return t.Children.map(o,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:s,isInvalid:c,checked:!!i&&i.indexOf(r)>-1,onChange:p,onFocus:u,onBlur:l,name:n})}))}}]);return o}(t.Component);L.formutilType="array";var Y=L;var U;try{var H=document.createElement("style");H.type="text/css";document.getElementsByTagName("head")[0].appendChild(H);U=document.styleSheets[document.styleSheets.length-1]}catch(e){}function z(e,t){if(U){if(U.insertRule){U.insertRule("".concat(e," { ").concat(t," }"),0)}else if(U.addRule){U.addRule(e,t,0)}}}var W=["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"];var J=u["default"].isValidElementType;var K=t.createContext({}),Q=K.Consumer,X=K.Provider;var Z=1;var ee=function e(t){Z=t};var te=r.FormControl.Feedback;function re(e){if(e){var t=e.type;if(J(t)){if(t.formutilType){return t.formutilType}if(typeof t==="string"&&e.props.type){return e.props.type}}return t||e}}var oe=function(o){$(a,o);var n=q(a);function a(){var e;k(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}e=n.call.apply(n,[this].concat(r));e.fields={};e.registerField=function(t,r){return r?e.fields[t]=r:delete e.fields[t]};e.latestValidationProps=null;e.checkHasError=function(e,t,r,o,n){switch(e){case 0:return t&&r&&o;case 1:return t&&r;case 2:return t;default:return false}};e.fetchCurrentValidationProps=function(t){var r=Object.keys(e.fields).map((function(t){return e.fields[t].$new()}));var o=r.filter((function(e){return e.$invalid}));var n=o.length>0;var a=r.some((function(e){return e.$dirty}));var i=r.some((function(e){return e.$touched}));var u=r.some((function(e){return e.$focused}));var l=o.map((function(r){var o=r.$invalid,n=r.$focused,a=r.$touched,i=r.$dirty,u=r.$getFirstError;var l=e.checkHasError(t,o,i,a,n);return l&&u()})).filter(Boolean);return e.getValidationProps(t,n,a,i,u,l)};e.getValidationProps=function(t,r,o,n,a,u){var l=e.checkHasError(t,r,o,n,a);var s={className:[e.props.className,l&&"has-error",r?"is-invalid":"is-valid",o?"is-dirty":"is-pristine",n?"is-touched":"is-untouched",a?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var c={};if(l){c.isInvalid=true}if(e.props.feedback&&!r){c.isValid=true}return{groupProps:s,validationProps:c,error:l?i["default"].createElement(te,{type:"invalid"},Array.isArray(u)?u.map((function(e,t){return i["default"].createElement("div",{key:t},e)})):u):null}};return e}C(a,[{key:"componentDidMount",value:function e(){var t;(t=this.registerAncestorField)===null||t===void 0?void 0:t.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var t;(t=this.registerAncestorField)===null||t===void 0?void 0:t.call(this,this.props.name,null)}},{key:"render",value:function o(){var n=this;var a=this.props;var u=a.children,s=a.addons,c=a.label,p=a.helper,d=a.labelCol,v=a.wrapperCol;a.validationState;a.className;var m=a.as;a.feedback;var y=a.extra,h=a.noStyle,b=a.errorLevel,g=b===void 0?Z:b,O=E(a,W);var P=v?r.Col:t.Fragment;var j=!m&&(d||v)?r.Row:m;if(c){if(t.isValidElement(c)){if(d){c=t.cloneElement(c,_({column:true},d))}}else{c=i["default"].createElement(r.FormLabel,Object.assign({column:!!d},d),c)}}var k=s?r.InputGroup:t.Fragment;var w=s?{size:s.size}:undefined;if(s){if(s.pre){s.pre=i["default"].createElement(r.InputGroup.Prepend,null,t.isValidElement(s.pre)?s.pre:i["default"].createElement(r.InputGroup.Text,null,s.pre))}if(s.end){s.end=i["default"].createElement(r.InputGroup.Append,null,t.isValidElement(s.end)?s.end:i["default"].createElement(r.InputGroup.Text,null,s.end))}}else{s={}}if(p&&!t.isValidElement(p)){p=i["default"].createElement(r.FormText,{className:"text-muted"},p)}if(!a.name){var C=this.latestValidationProps=this.fetchCurrentValidationProps(g),V=C.groupProps,F=C.error;Promise.resolve().then((function(){if(!l["default"](n.latestValidationProps,n.fetchCurrentValidationProps(g))){n.forceUpdate()}}));return i["default"].createElement(X,{value:this.registerField},i["default"].createElement(r.FormGroup,Object.assign({},O,V,{as:j}),c,i["default"].createElement(P,v,i["default"].createElement(k,w,s.pre,typeof u==="function"?u():u,s.end),F||p),y))}if(O.$memo===true){O.__DIFF__={childList:u,compositionValue:this.compositionValue}}else if(Array.isArray(O.$memo)){O.$memo=O.$memo.concat(this.compositionValue)}var S=typeof u==="function"?u:t.Children.only(u);var $=re(S);if($===r.FormControl){if(S.props.as==="select"&&S.props.multiple){$="multipleSelect"}}switch($){case r.FormCheck:case r.ToggleButton:case"checkbox":case"radio":O.__TYPE__="checked";break;case"multipleSelect":O.__TYPE__="array";break;case Y:case r.ToggleButtonGroup:if(S.props.type!=="radio"){O.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":O.__TYPE__=$;break}return i["default"].createElement(e.EasyField,Object.assign({},O,{passUtil:"$fieldutil",render:function e(o){var u,l;var d=a.valuePropName,m=d===void 0?"value":d,b=a.changePropName,_=b===void 0?"onChange":b,C=a.focusPropName,V=C===void 0?"onFocus":C,F=a.blurPropName,M=F===void 0?"onBlur":F;var T=o.$fieldutil,B=o[_],G=o[V],I=o[M],R=o[m],N=E(o,["$fieldutil",_,V,M,m].map(x));var A=T.$invalid,D=T.$dirty,q=T.$touched,L=T.$focused,Y=T.$getFirstError;var U;switch(O.__TYPE__){case"checked":case"checkbox":case"radio":var H=a.checked,z=H===void 0?true:H,W=a.unchecked,J=W===void 0?false:W;U={checked:R===z,onChange:function e(t){var r=t&&t.target?t.target.checked:t;B(r?z:J,t)}};break;default:U=(u={onCompositionEnd:function e(t){n.isComposing=false;delete n.compositionValue;B(t)},onCompositionStart:function e(){return n.isComposing=true}},f(u,_,$==="multipleSelect"?function(e){B([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(n.isComposing){n.compositionValue=e.target[m];n.forceUpdate()}else{for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++){r[o-1]=arguments[o]}B.apply(void 0,[e].concat(r))}}),f(u,m,"compositionValue"in n?n.compositionValue:R),f(u,M,(function(){if(n.isComposing){n.isComposing=false;delete n.compositionValue;B.apply(void 0,arguments)}return I.apply(void 0,arguments)})),f(u,"name",O.name),u);break}var K=n.getValidationProps(g,A,D,q,L,Y()),X=K.groupProps,Z=K.validationProps,ee=K.error;U=Object.assign((l={},f(l,V,G),f(l,M,I),l),U,Z);var te=typeof S==="function"?S(U):t.cloneElement(S,U);return i["default"].createElement(Q,null,(function(e){if(h){n.$fieldutil=T;n.registerAncestorField=e;return te}return i["default"].createElement(r.FormGroup,Object.assign({},N,X,{as:j}),c,i["default"].createElement(P,v,i["default"].createElement(k,w,s.pre,te,s.end),ee||p),y)}))}}))}}]);return a}(t.Component);var ne=oe;z(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");z(".has-error .invalid-feedback","display: block");var ae=function(e){$(o,e);var r=q(o);function o(){k(this,o);return r.apply(this,arguments)}C(o,[{key:"render",value:function e(){var r=this.props,o=r.children,n=r.name,a=r.onChange,i=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,c=r.isInvalid;var p=function e(t){a(t.target.value,t)};return t.Children.map(o,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:s,isInvalid:c,checked:i===r,onChange:p,onFocus:u,onBlur:l,name:n})}))}}]);return o}(t.Component);var ie=ae;exports.CheckboxGroup=Y;exports.FormGroup=ne;exports.RadioGroup=ie;exports.SwitchGroup=Y;exports.setErrorLevel=ee;Object.keys(e).forEach((function(t){if(t!=="default"&&!exports.hasOwnProperty(t))Object.defineProperty(exports,t,{enumerable:true,get:function(){return e[t]}})}));
