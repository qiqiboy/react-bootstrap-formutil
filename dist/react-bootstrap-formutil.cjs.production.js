"use strict";Object.defineProperty(exports,"__esModule",{value:true});function e(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=require("react-formutil");var t=require("react");var n=e(t);var o=require("react-is");var i=require("react-bootstrap");var a=e(require("react-fast-compare"));function u(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var l=u;function c(e,r){return r={exports:{}},e(r,r.exports),r.exports}var s=c((function(e){function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=r=function e(r){return typeof r}}else{e.exports=r=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return r(t)}e.exports=r}));function f(e,r){if(s(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(s(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var p=f;function d(e){var r=p(e,"string");return s(r)==="symbol"?r:String(r)}var v=d;function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}));t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){m(Object(t),true).forEach((function(r){l(e,r,t[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}}return e}var h=y;function b(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,i;for(i=0;i<n.length;i++){o=n[i];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}var g=b;function E(e,r){if(e==null)return{};var t=g(e,r);var n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++){n=i[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}var P=E;function O(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var k=O;function j(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function C(e,r,t){if(r)j(e.prototype,r);if(t)j(e,t);return e}var _=C;var x=c((function(e){function r(t){e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return r(t)}e.exports=r}));function w(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}var F=w;function S(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var V=S;function $(e,r){if(r&&(s(r)==="object"||typeof r==="function")){return r}return V(e)}var T=$;function G(e){return function(){var r=x(e),t;if(F()){var n=x(this).constructor;t=Reflect.construct(r,arguments,n)}else{t=r.apply(this,arguments)}return T(this,t)}}var I=G;var R=c((function(e){function r(t,n){e.exports=r=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return r(t,n)}e.exports=r}));function N(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)R(e,r)}var B=N;var A=function(e){B(n,e);var r=I(n);function n(){k(this,n);return r.apply(this,arguments)}_(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,i=r.onChange,a=r.value,u=r.onFocus,l=r.onBlur,c=r.isValid,s=r.isInvalid;var f=function e(r){var t=r.target,n=t.checked,o=t.value;var u=a||[];i(n?u.concat(o):u.filter((function(e){return e!==o})))};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:c,isInvalid:s,checked:!!a&&a.indexOf(r)>-1,onChange:f,onFocus:u,onBlur:l,name:o})}))}}]);return n}(t.Component);A.formutilType="array";var D;try{var q=document.createElement("style");q.type="text/css";document.getElementsByTagName("head")[0].appendChild(q);D=document.styleSheets[document.styleSheets.length-1]}catch(e){}function Y(e,r){if(D){if(D.insertRule){D.insertRule("".concat(e," { ").concat(r," }"),0)}else if(D.addRule){D.addRule(e,r,0)}}}var L=t.createContext({}),U=L.Consumer,H=L.Provider;var z=1;var M=function e(r){z=r};var W=i.FormControl.Feedback;function J(e){if(e){var r=e.type;if(o.isValidElementType(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var K=function(e){B(u,e);var o=I(u);function u(){var e;k(this,u);for(var r=arguments.length,t=new Array(r),i=0;i<r;i++){t[i]=arguments[i]}e=o.call.apply(o,[this].concat(t));e.fields={};e.registerField=function(r,t){return t?e.fields[r]=t:delete e.fields[r]};e.latestValidationProps=null;e.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};e.fetchCurrentValidationProps=function(r){var t=Object.keys(e.fields).map((function(r){return e.fields[r].$new()}));var n=t.filter((function(e){return e.$invalid}));var o=n.length>0;var i=t.some((function(e){return e.$dirty}));var a=t.some((function(e){return e.$touched}));var u=t.some((function(e){return e.$focused}));var l=n.map((function(t){var n=t.$invalid,o=t.$focused,i=t.$touched,a=t.$dirty,u=t.$getFirstError;var l=e.checkHasError(r,n,a,i,o);return l&&u()})).filter(Boolean);return e.getValidationProps(r,o,i,a,u,l)};e.getValidationProps=function(r,t,o,i,a,u){var l=e.checkHasError(r,t,o,i,a);var c={className:[e.props.className,l&&"has-error",t?"is-invalid":"is-valid",o?"is-dirty":"is-pristine",i?"is-touched":"is-untouched",a?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var s={};if(l){s.isInvalid=true}if(e.props.feedback&&!t){s.isValid=true}return{groupProps:c,validationProps:s,error:l?n.createElement(W,{type:"invalid"},Array.isArray(u)?u.map((function(e,r){return n.createElement("div",{key:r},e)})):u):null}};return e}_(u,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var o=this;var u=this.props;var c=u.children,s=u.addons,f=u.label,p=u.helper,d=u.labelCol,m=u.wrapperCol,y=u.validationState,b=u.className,g=u.as,E=u.feedback,O=u.extra,k=u.noStyle,j=u.errorLevel,C=j===void 0?z:j,_=P(u,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var x=m?i.Col:t.Fragment;var w=!g&&(d||m)?i.Row:g;if(f){if(t.isValidElement(f)){if(d){f=t.cloneElement(f,h({column:true},d))}}else{f=n.createElement(i.FormLabel,Object.assign({column:!!d},d),f)}}var F=s?i.InputGroup:t.Fragment;var S=s?{size:s.size}:undefined;if(s){if(s.pre){s.pre=n.createElement(i.InputGroup.Prepend,null,t.isValidElement(s.pre)?s.pre:n.createElement(i.InputGroup.Text,null,s.pre))}if(s.end){s.end=n.createElement(i.InputGroup.Append,null,t.isValidElement(s.end)?s.end:n.createElement(i.InputGroup.Text,null,s.end))}}else{s={}}if(p&&!t.isValidElement(p)){p=n.createElement(i.FormText,{className:"text-muted"},p)}if(!u.name){var V=this.latestValidationProps=this.fetchCurrentValidationProps(C),$=V.groupProps,T=V.error;Promise.resolve().then((function(){if(!a(o.latestValidationProps,o.fetchCurrentValidationProps(C))){o.forceUpdate()}}));return n.createElement(H,{value:this.registerField},n.createElement(i.FormGroup,Object.assign({},_,$,{as:w}),f,n.createElement(x,m,n.createElement(F,S,s.pre,typeof c==="function"?c():c,s.end),T||p),O))}if(u.$memo===true){_.__DIFF__=c}var G=typeof c==="function"?c:t.Children.only(c);var I=J(G);if(I===i.FormControl){if(G.props.as==="select"&&G.props.multiple){I="multipleSelect"}}switch(I){case i.FormCheck:case i.ToggleButton:case"checkbox":case"radio":_.__TYPE__="checked";break;case"multipleSelect":_.__TYPE__="array";break;case A:case i.ToggleButtonGroup:if(G.props.type!=="radio"){_.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":_.__TYPE__=I;break}return n.createElement(r.EasyField,Object.assign({},_,{passUtil:"$fieldutil",render:function e(r){var a,c;var d=u.valuePropName,y=d===void 0?"value":d,h=u.changePropName,b=h===void 0?"onChange":h,g=u.focusPropName,E=g===void 0?"onFocus":g,j=u.blurPropName,V=j===void 0?"onBlur":j;var $=r.$fieldutil,T=r[b],R=r[E],N=r[V],B=r[y],A=P(r,["$fieldutil",b,E,V,y].map(v));var D=$.$invalid,q=$.$dirty,Y=$.$touched,L=$.$focused,H=$.$getFirstError;var z;switch(_.__TYPE__){case"checked":case"checkbox":case"radio":var M=u.checked,W=M===void 0?true:M,J=u.unchecked,K=J===void 0?false:J;z={checked:B===W,onChange:function e(r){var t=r&&r.target?r.target.checked:r;T(t?W:K,r)}};break;default:z=(a={onCompositionEnd:function e(r){o.isComposition=false;delete o.compositionValue;T(r)},onCompositionStart:function e(){return o.isComposition=true}},l(a,b,I==="multipleSelect"?function(e){T([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(o.isComposition){o.compositionValue=e.target[y];o.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}T.apply(void 0,[e].concat(t))}}),l(a,y,"compositionValue"in o?o.compositionValue:B),l(a,V,(function(){if(o.isComposition){o.isComposition=false;delete o.compositionValue;T.apply(void 0,arguments)}return N.apply(void 0,arguments)})),l(a,"name",_.name),a);break}var Q=o.getValidationProps(C,D,q,Y,L,H()),X=Q.groupProps,Z=Q.validationProps,ee=Q.error;z=Object.assign((c={},l(c,E,R),l(c,V,N),c),z,Z);var re=typeof G==="function"?G(z):t.cloneElement(G,z);return n.createElement(U,null,(function(e){if(k){o.$fieldutil=$;o.registerAncestorField=e;return re}return n.createElement(i.FormGroup,Object.assign({},A,X,{as:w}),f,n.createElement(x,m,n.createElement(F,S,s.pre,re,s.end),ee||p),O)}))}}))}}]);return u}(t.Component);Y(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");Y(".has-error .invalid-feedback","display: block");var Q=function(e){B(n,e);var r=I(n);function n(){k(this,n);return r.apply(this,arguments)}_(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,i=r.onChange,a=r.value,u=r.onFocus,l=r.onBlur,c=r.isValid,s=r.isInvalid;var f=function e(r){i(r.target.value,r)};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:c,isInvalid:s,checked:a===r,onChange:f,onFocus:u,onBlur:l,name:o})}))}}]);return n}(t.Component);Object.keys(r).forEach((function(e){if(e!=="default")Object.defineProperty(exports,e,{enumerable:true,get:function(){return r[e]}})}));exports.CheckboxGroup=A;exports.FormGroup=K;exports.RadioGroup=Q;exports.SwitchGroup=A;exports.setErrorLevel=M;
