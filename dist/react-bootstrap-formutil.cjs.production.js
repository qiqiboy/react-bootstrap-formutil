"use strict";Object.defineProperty(exports,"__esModule",{value:true});function e(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=require("react-formutil");var t=e(require("@babel/runtime/helpers/defineProperty"));var n=e(require("@babel/runtime/helpers/toPropertyKey"));var a=e(require("@babel/runtime/helpers/objectSpread2"));var i=e(require("@babel/runtime/helpers/objectWithoutProperties"));var o=e(require("@babel/runtime/helpers/classCallCheck"));var l=e(require("@babel/runtime/helpers/createClass"));var s=e(require("@babel/runtime/helpers/possibleConstructorReturn"));var u=e(require("@babel/runtime/helpers/getPrototypeOf"));var c=e(require("@babel/runtime/helpers/inherits"));var p=require("react");var d=e(p);var f=require("react-is");var v=require("react-bootstrap");var m=e(require("react-fast-compare"));var h=function(e){c(r,e);function r(){o(this,r);return s(this,u(r).apply(this,arguments))}l(r,[{key:"render",value:function e(){var r=this.props,t=r.children,n=r.name,a=r.onChange,i=r.value,o=r.onFocus,l=r.onBlur,s=r.isValid,u=r.isInvalid;var c=function e(r){var t=r.target,n=t.checked,o=t.value;var l=i||[];a(n?l.concat(o):l.filter(function(e){return e!==o}))};return p.Children.map(t,function(e){var r=e.props.value;return p.cloneElement(e,{isValid:s,isInvalid:u,checked:!!i&&i.indexOf(r)>-1,onChange:c,onFocus:o,onBlur:l,name:n})})}}]);return r}(p.Component);var b;try{var y=document.createElement("style");y.type="text/css";document.getElementsByTagName("head")[0].appendChild(y);b=document.styleSheets[document.styleSheets.length-1]}catch(e){}function g(e,r){if(b){if(b.insertRule){b.insertRule("".concat(e," { ").concat(r," }"),0)}else if(b.addRule){b.addRule(e,r,0)}}}var E=p.createContext({}),k=E.Consumer,C=E.Provider;var P=1;var F=function e(r){P=r};var _=v.FormControl.Feedback;function V(e){if(e){var r=e.type;if(f.isValidElementType(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var $=function(e){c(f,e);function f(){var e;var r;o(this,f);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++){n[a]=arguments[a]}r=s(this,(e=u(f)).call.apply(e,[this].concat(n)));r.fields={};r.registerField=function(e,t){return t?r.fields[e]=t:delete r.fields[e]};r.latestValidationProps=null;r.checkHasError=function(e,r,t,n,a){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};r.fetchCurrentValidationProps=function(e){var t=Object.keys(r.fields).map(function(e){return r.fields[e].$new()});var n=t.filter(function(e){return e.$invalid});var a=n.length>0;var i=t.some(function(e){return e.$dirty});var o=t.some(function(e){return e.$touched});var l=t.some(function(e){return e.$focused});var s=n.map(function(t){var n=t.$invalid,a=t.$focused,i=t.$touched,o=t.$dirty,l=t.$getFirstError;var s=r.checkHasError(e,n,o,i,a);return s&&l()}).filter(Boolean);return r.getValidationProps(e,a,i,o,l,s)};r.getValidationProps=function(e,t,n,a,i,o){var l=r.checkHasError(e,t,n,a,i);var s={className:[r.props.className,l&&"has-error",t?"is-invalid":"is-valid",n?"is-dirty":"is-pristine",a?"is-touched":"is-untouched",i?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var u={};if(l){u.isInvalid=true}if(r.props.feedback&&!t){u.isValid=true}return{groupProps:s,validationProps:u,error:l?d.createElement(_,{type:"invalid"},Array.isArray(o)?o.map(function(e,r){return d.createElement("div",{key:r},e)}):o):null}};return r}l(f,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var o=this;var l=this.props;var s=l.children,u=l.addons,c=l.label,f=l.helper,b=l.labelCol,y=l.wrapperCol,g=l.validationState,E=l.className,F=l.as,_=l.feedback,$=l.extra,x=l.noStyle,j=l.errorLevel,q=j===void 0?P:j,T=i(l,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var G=y?v.Col:p.Fragment;var S=!F&&(b||y)?v.Row:F;if(c){if(p.isValidElement(c)){if(b){c=p.cloneElement(c,a({column:true},b))}}else{c=d.createElement(v.FormLabel,Object.assign({column:!!b},b),c)}}var I=u?v.InputGroup:p.Fragment;var O=u?{size:u.size}:undefined;if(u){if(u.pre){u.pre=d.createElement(v.InputGroup.Prepend,null,p.isValidElement(u.pre)?u.pre:d.createElement(v.InputGroup.Text,null,u.pre))}if(u.end){u.end=d.createElement(v.InputGroup.Append,null,p.isValidElement(u.end)?u.end:d.createElement(v.InputGroup.Text,null,u.end))}}else{u={}}if(f&&!p.isValidElement(f)){f=d.createElement(v.FormText,{className:"text-muted"},f)}if(!l.name){var w=this.latestValidationProps=this.fetchCurrentValidationProps(q),B=w.groupProps,N=w.error;Promise.resolve().then(function(){if(!m(o.latestValidationProps,o.fetchCurrentValidationProps(q))){o.forceUpdate()}});return d.createElement(C,{value:this.registerField},d.createElement(v.FormGroup,Object.assign({},T,B,{as:S}),c,d.createElement(G,y,d.createElement(I,O,u.pre,s,u.end),N||f),$))}if(l.$memo===true){T.__DIFF__=s}var A=typeof s==="function"?s:p.Children.only(s);var R=V(A);if(R===v.FormControl){if(A.props.as==="select"&&A.props.multiple){R="multipleSelect"}}switch(R){case v.FormCheck:case v.ToggleButton:case"checkbox":case"radio":T.__TYPE__="checked";break;case"multipleSelect":T.__TYPE__="array";break;case h:case v.ToggleButtonGroup:if(A.props.type!=="radio"){T.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":T.__TYPE__=R;break}return d.createElement(r.EasyField,Object.assign({},T,{passUtil:"$fieldutil",render:function e(r){var a,s;var m=l.valuePropName,h=m===void 0?"value":m,b=l.changePropName,g=b===void 0?"onChange":b,E=l.focusPropName,C=E===void 0?"onFocus":E,P=l.blurPropName,F=P===void 0?"onBlur":P;var _=r.$fieldutil,V=r[g],j=r[C],w=r[F],B=r[h],N=i(r,["$fieldutil",g,C,F,h].map(n));var Y=_.$invalid,L=_.$dirty,U=_.$touched,H=_.$focused,z=_.$getFirstError;var D;switch(T.__TYPE__){case"checked":case"checkbox":case"radio":var M=l.checked,W=M===void 0?true:M,K=l.unchecked,J=K===void 0?false:K;D={checked:B===W,onChange:function e(r){var t=r&&r.target?r.target.checked:r;V(t?W:J,r)}};break;default:D=(a={onCompositionEnd:function e(r){o.isComposition=false;delete o.compositionValue;V(r)},onCompositionStart:function e(){return o.isComposition=true}},t(a,g,R==="multipleSelect"?function(e){V([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(o.isComposition){o.compositionValue=e.target[h];o.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}V.apply(void 0,[e].concat(t))}}),t(a,h,"compositionValue"in o?o.compositionValue:B),t(a,"name",T.name),a);break}var Q=o.getValidationProps(q,Y,L,U,H,z()),X=Q.groupProps,Z=Q.validationProps,ee=Q.error;Object.assign(D,(s={},t(s,C,j),t(s,F,w),s),Z);var re=typeof A==="function"?A(D):p.cloneElement(A,D);return d.createElement(k,null,function(e){if(x){o.$fieldutil=_;o.registerAncestorField=e;return re}return d.createElement(v.FormGroup,Object.assign({},N,X,{as:S}),c,d.createElement(G,y,d.createElement(I,O,u.pre,re,u.end),ee||f),$)})}}))}}]);return f}(p.Component);g(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");g(".has-error .invalid-feedback","display: block");var x=function(e){c(r,e);function r(){o(this,r);return s(this,u(r).apply(this,arguments))}l(r,[{key:"render",value:function e(){var r=this.props,t=r.children,n=r.name,a=r.onChange,i=r.value,o=r.onFocus,l=r.onBlur,s=r.isValid,u=r.isInvalid;var c=function e(r){a(r.target.value,r)};return p.Children.map(t,function(e){var r=e.props.value;return p.cloneElement(e,{isValid:s,isInvalid:u,checked:i===r,onChange:c,onFocus:o,onBlur:l,name:n})})}}]);return r}(p.Component);Object.keys(r).forEach(function(e){if(e!=="default")Object.defineProperty(exports,e,{enumerable:true,get:function(){return r[e]}})});exports.CheckboxGroup=h;exports.FormGroup=$;exports.RadioGroup=x;exports.SwitchGroup=h;exports.setErrorLevel=F;
