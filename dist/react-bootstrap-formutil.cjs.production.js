"use strict";Object.defineProperty(exports,"__esModule",{value:true});var e=require("react-formutil");var t=require("react");var r=require("react-bootstrap");var o=require("react-is");var n=require("react-fast-compare");function a(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var i=a(t);var u=a(o);var l=a(n);function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function c(e,t){return t={exports:{}},e(t,t.exports),t.exports}var p=c((function(e){function t(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var f=s(p);var d=c((function(e){function t(r){"@babel/helpers - typeof";return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=true,e.exports["default"]=e.exports,t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(d);var v=d;var m=c((function(e){var t=v["default"];function r(e,r){if(t(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==undefined){var n=o.call(e,r||"default");if(t(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(m);var y=m;var h=c((function(e){var t=v["default"];function r(e){var r=y(e,"string");return t(r)==="symbol"?r:String(r)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var b=s(h);var x=c((function(e){function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var g=s(x);var _=c((function(e){function t(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,a;for(a=0;a<o.length;a++){n=o[a];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(_);var O=_;var P=c((function(e){function t(e,t){if(e==null)return{};var r=O(e,t);var o,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++){o=a[n];if(t.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;r[o]=e[o]}}return r}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var E=s(P);var j=c((function(e){function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var k=s(j);var w=c((function(e){function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function r(e,r,o){if(r)t(e.prototype,r);if(o)t(e,o);Object.defineProperty(e,"prototype",{writable:false});return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));var C=s(w);var F=c((function(e){function t(r,o){e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r,o)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(F);var V=F;var S=c((function(e){function t(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)V(e,t)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var $=s(S);var M=c((function(e){function t(r){e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=true,e.exports["default"]=e.exports;return t(r)}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(M);var T=c((function(e){function t(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(T);var B=c((function(e){function t(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(B);var R=B;var G=c((function(e){var t=v["default"];function r(e,r){if(r&&(t(r)==="object"||typeof r==="function")){return r}else if(r!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return R(e)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports}));s(G);var I=M;var N=T;var A=G;var L=c((function(e){function t(e){var t=N();return function r(){var o=I(e),n;if(t){var a=I(this).constructor;n=Reflect.construct(o,arguments,a)}else{n=o.apply(this,arguments)}return A(this,n)}}e.exports=t,e.exports.__esModule=true,e.exports["default"]=e.exports}));var D=s(L);var q=function(e){$(o,e);var r=D(o);function o(){k(this,o);return r.apply(this,arguments)}C(o,[{key:"render",value:function e(){var r=this.props,o=r.children,n=r.name,a=r.onChange,i=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,c=r.isInvalid;var p=function e(t){var r=t.target,o=r.checked,n=r.value;var u=i||[];a(o?u.concat(n):u.filter((function(e){return e!==n})))};return t.Children.map(o,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:s,isInvalid:c,checked:!!i&&i.indexOf(r)>-1,onChange:p,onFocus:u,onBlur:l,name:n})}))}}]);return o}(t.Component);q.formutilType="array";var Y=q;var U;try{var H=document.createElement("style");H.type="text/css";document.getElementsByTagName("head")[0].appendChild(H);U=document.styleSheets[document.styleSheets.length-1]}catch(e){}function z(e,t){if(U){if(U.insertRule){U.insertRule("".concat(e," { ").concat(t," }"),0)}else if(U.addRule){U.addRule(e,t,0)}}}var W=["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","floatingLabel","extra","noStyle","errorLevel"];var J=u["default"].isValidElementType;var K=t.createContext({}),Q=K.Consumer,X=K.Provider;var Z=1;var ee=function e(t){Z=t};var te=r.FormControl.Feedback;function re(e){if(e){var t=e.type;if(J(t)){if(t.formutilType){return t.formutilType}if(typeof t==="string"&&e.props.type){return e.props.type}}return t||e}}var oe=function(o){$(a,o);var n=D(a);function a(){var e;k(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}e=n.call.apply(n,[this].concat(r));e.fields={};e.registerField=function(t,r){return r?e.fields[t]=r:delete e.fields[t]};e.latestValidationProps=null;e.checkHasError=function(e,t,r,o,n){switch(e){case 0:return t&&r&&o;case 1:return t&&r;case 2:return t;default:return false}};e.fetchCurrentValidationProps=function(t){var r=Object.keys(e.fields).map((function(t){return e.fields[t].$new()}));var o=r.filter((function(e){return e.$invalid}));var n=o.length>0;var a=r.some((function(e){return e.$dirty}));var i=r.some((function(e){return e.$touched}));var u=r.some((function(e){return e.$focused}));var l=o.map((function(r){var o=r.$invalid,n=r.$focused,a=r.$touched,i=r.$dirty,u=r.$getFirstError;var l=e.checkHasError(t,o,i,a,n);return l&&u()})).filter(Boolean);return e.getValidationProps(t,n,a,i,u,l)};e.getValidationProps=function(t,r,o,n,a,u){var l=e.checkHasError(t,r,o,n,a);var s={className:[e.props.className,l&&"has-error",r?"is-invalid":"is-valid",o?"is-dirty":"is-pristine",n?"is-touched":"is-untouched",a?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var c={};if(l){c.isInvalid=true}if(e.props.feedback&&!r){c.isValid=true}return{groupProps:s,validationProps:c,error:l?i["default"].createElement(te,{type:"invalid"},Array.isArray(u)?u.map((function(e,t){return i["default"].createElement("div",{key:t},e)})):u):null}};return e}C(a,[{key:"componentDidMount",value:function e(){var t;(t=this.registerAncestorField)===null||t===void 0?void 0:t.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var t;(t=this.registerAncestorField)===null||t===void 0?void 0:t.call(this,this.props.name,null)}},{key:"render",value:function o(){var n=this;var a=this.props;var u=a.children,s=a.addons,c=a.label,p=a.helper,d=a.labelCol,v=a.wrapperCol;a.validationState;a.className;var m=a.as;a.feedback;var y=a.floatingLabel,h=a.extra,x=a.noStyle,_=a.errorLevel,O=_===void 0?Z:_,P=E(a,W);var j=v?r.Col:t.Fragment;var k=!m&&(d||v)?r.Row:m;if(c){if(t.isValidElement(c)){if(d){c=t.cloneElement(c,g({column:true},d))}}else{c=i["default"].createElement(r.FormLabel,Object.assign({column:!!d},d),c)}}var w=s?r.InputGroup:t.Fragment;var C=s?{size:s.size}:undefined;if(s){if(s.pre){s.pre=t.isValidElement(s.pre)?s.pre:i["default"].createElement(r.InputGroup.Text,null,s.pre)}if(s.end){s.end=t.isValidElement(s.end)?s.end:i["default"].createElement(r.InputGroup.Text,null,s.end)}}else{s={}}if(p&&!t.isValidElement(p)){p=i["default"].createElement(r.FormText,{muted:true},p)}if(!a.name){var F=this.latestValidationProps=this.fetchCurrentValidationProps(O),V=F.groupProps,S=F.error;Promise.resolve().then((function(){if(!l["default"](n.latestValidationProps,n.fetchCurrentValidationProps(O))){n.forceUpdate()}}));var $=typeof u==="function"?u():u;return i["default"].createElement(X,{value:this.registerField},i["default"].createElement(r.FormGroup,Object.assign({},P,V,{as:k}),c,i["default"].createElement(j,v,i["default"].createElement(w,C,s.pre,$,s.end),S||p),h))}if(P.$memo===true){P.__DIFF__={childList:u,compositionValue:this.compositionValue}}else if(Array.isArray(P.$memo)){P.$memo=P.$memo.concat(this.compositionValue)}var M=typeof u==="function"?u:t.Children.only(u);var T=re(M);if((T===r.FormControl&&M.props.as==="select"||T===r.FormSelect)&&M.props.multiple){T="multipleSelect"}switch(T){case r.FormCheck:case r.ToggleButton:case"checkbox":case"radio":P.__TYPE__="checked";break;case"multipleSelect":P.__TYPE__="array";break;case Y:case r.ToggleButtonGroup:if(M.props.type!=="radio"){P.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":P.__TYPE__=T;break}return i["default"].createElement(e.EasyField,Object.assign({},P,{passUtil:"$fieldutil",render:function e(o){var u,l;var d=a.valuePropName,m=d===void 0?"value":d,g=a.changePropName,_=g===void 0?"onChange":g,F=a.focusPropName,V=F===void 0?"onFocus":F,S=a.blurPropName,$=S===void 0?"onBlur":S;var B=o.$fieldutil,R=o[_],G=o[V],I=o[$],N=o[m],A=E(o,["$fieldutil",_,V,$,m].map(b));var L=B.$invalid,D=B.$dirty,q=B.$touched,Y=B.$focused,U=B.$getFirstError;var H;switch(P.__TYPE__){case"checked":case"checkbox":case"radio":var z=a.checked,W=z===void 0?true:z,J=a.unchecked,K=J===void 0?false:J;H={checked:N===W,onChange:function e(t){var r=t&&t.target?t.target.checked:t;R(r?W:K,t)}};break;default:H=(u={onCompositionEnd:function e(t){n.isComposing=false;delete n.compositionValue;R(t)},onCompositionStart:function e(){return n.isComposing=true}},f(u,_,T==="multipleSelect"?function(e){R([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(n.isComposing){n.compositionValue=e.target[m];n.forceUpdate()}else{for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++){r[o-1]=arguments[o]}R.apply(void 0,[e].concat(r))}}),f(u,m,"compositionValue"in n?n.compositionValue:N),f(u,$,(function(){if(n.isComposing){n.isComposing=false;delete n.compositionValue;R.apply(void 0,arguments)}return I.apply(void 0,arguments)})),f(u,"name",P.name),u);break}var X=n.getValidationProps(O,L,D,q,Y,U()),Z=X.groupProps,ee=X.validationProps,te=X.error;H=Object.assign((l={},f(l,V,G),f(l,$,I),l),H,ee);var re=typeof M==="function"?M(H):t.cloneElement(M,H);return i["default"].createElement(Q,null,(function(e){if(x){n.$fieldutil=B;n.registerAncestorField=e;return re}return i["default"].createElement(r.FormGroup,Object.assign({},A,Z,{as:k}),!y&&c,i["default"].createElement(j,v,i["default"].createElement(w,C,s.pre,y&&c?i["default"].createElement(r.FloatingLabel,{label:c.props.children},re):re,s.end),te||p),h)}))}}))}}]);return a}(t.Component);var ne=oe;z(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");z(".has-error .invalid-feedback","display: block");var ae=function(e){$(o,e);var r=D(o);function o(){k(this,o);return r.apply(this,arguments)}C(o,[{key:"render",value:function e(){var r=this.props,o=r.children,n=r.name,a=r.onChange,i=r.value,u=r.onFocus,l=r.onBlur,s=r.isValid,c=r.isInvalid;var p=function e(t){a(t.target.value,t)};return t.Children.map(o,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:s,isInvalid:c,checked:i===r,onChange:p,onFocus:u,onBlur:l,name:n})}))}}]);return o}(t.Component);var ie=ae;exports.CheckboxGroup=Y;exports.FormGroup=ne;exports.RadioGroup=ie;exports.SwitchGroup=Y;exports.setErrorLevel=ee;Object.keys(e).forEach((function(t){if(t!=="default"&&!exports.hasOwnProperty(t))Object.defineProperty(exports,t,{enumerable:true,get:function(){return e[t]}})}));
