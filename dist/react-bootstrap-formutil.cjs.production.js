"use strict";Object.defineProperty(exports,"__esModule",{value:true});function e(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=require("react-formutil");var t=e(require("@babel/runtime/helpers/esm/defineProperty"));var n=e(require("@babel/runtime/helpers/esm/toPropertyKey"));var a=e(require("@babel/runtime/helpers/esm/objectSpread2"));var i=e(require("@babel/runtime/helpers/esm/objectWithoutProperties"));var o=e(require("@babel/runtime/helpers/esm/classCallCheck"));var l=e(require("@babel/runtime/helpers/esm/createClass"));var s=e(require("@babel/runtime/helpers/esm/possibleConstructorReturn"));var u=e(require("@babel/runtime/helpers/esm/getPrototypeOf"));var c=e(require("@babel/runtime/helpers/esm/inherits"));var p=require("react");var d=e(p);var v=require("react-is");var m=require("react-bootstrap");var f=e(require("react-fast-compare"));var h=function(e){c(r,e);function r(){o(this,r);return s(this,u(r).apply(this,arguments))}l(r,[{key:"render",value:function e(){var r=this.props,t=r.children,n=r.name,a=r.onChange,i=r.value,o=r.onFocus,l=r.onBlur,s=r.isValid,u=r.isInvalid;var c=function e(r){var t=r.target,n=t.checked,o=t.value;var l=i||[];a(n?l.concat(o):l.filter(function(e){return e!==o}))};return p.Children.map(t,function(e){var r=e.props.value;return p.cloneElement(e,{isValid:s,isInvalid:u,checked:!!i&&i.indexOf(r)>-1,onChange:c,onFocus:o,onBlur:l,name:n})})}}]);return r}(p.Component);var b;try{var y=document.createElement("style");y.type="text/css";document.getElementsByTagName("head")[0].appendChild(y);b=document.styleSheets[document.styleSheets.length-1]}catch(e){}function g(e,r){if(b){if(b.insertRule){b.insertRule("".concat(e," { ").concat(r," }"),0)}else if(b.addRule){b.addRule(e,r,0)}}}var k=p.createContext({}),E=k.Consumer,C=k.Provider;var P=1;var F=function e(r){P=r};var V=m.Form.displayName!=="Form";var _=V?m.FormControl:"FormControl";var x=V?m.FormCheck:"FormCheck";var $=V?h:"CheckboxGroup";var T=V?m.ToggleButton:"ToggleButton";var j=V?m.ToggleButtonGroup:"ToggleButtonGroup";var q=m.FormControl.Feedback;function G(e){if(e){var r;var t=e.type;if(typeof t!=="string"&&v.isValidElementType(t)){if(t.formutilType){return t.formutilType}if(V){return t}return t.displayName||t.name}return((r=e.props)===null||r===void 0?void 0:r.type)||e.type}}var B=function(e){c(v,e);function v(){var e;var r;o(this,v);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++){n[a]=arguments[a]}r=s(this,(e=u(v)).call.apply(e,[this].concat(n)));r.fields={};r.registerField=function(e,t){return t?r.fields[e]=t:delete r.fields[e]};r.latestValidationProps=null;r.checkHasError=function(e,r,t,n,a){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};r.fetchCurrentValidationProps=function(e){var t=Object.keys(r.fields).map(function(e){return r.fields[e].$new()});var n=t.filter(function(e){return e.$invalid});var a=n.length>0;var i=t.some(function(e){return e.$dirty});var o=t.some(function(e){return e.$touched});var l=t.some(function(e){return e.$focused});var s=n.map(function(t){var n=t.$invalid,a=t.$focused,i=t.$touched,o=t.$dirty,l=t.$getFirstError;var s=r.checkHasError(e,n,o,i,a);return s&&l()}).filter(Boolean);return r.getValidationProps(e,a,i,o,l,s)};r.getValidationProps=function(e,t,n,a,i,o){var l=r.checkHasError(e,t,n,a,i);var s={className:[r.props.className,l&&"has-error",t?"is-invalid":"is-valid",n?"is-dirty":"is-pristine",a?"is-touched":"is-untouched",i?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var u={};if(l){u.isInvalid=true}if(r.props.feedback&&!t){u.isValid=true}return{groupProps:s,validationProps:u,error:l?d.createElement(q,{type:"invalid"},Array.isArray(o)?o.map(function(e,r){return d.createElement("div",{key:r},e)}):o):null}};return r}l(v,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var o=this;var l=this.props;var s=l.children,u=l.addons,c=l.label,v=l.helper,h=l.labelCol,b=l.wrapperCol,y=l.validationState,g=l.className,k=l.as,F=l.feedback,V=l.extra,q=l.noStyle,B=l.errorLevel,N=B===void 0?P:B,S=i(l,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var O=b?m.Col:p.Fragment;var w=!k&&(h||b)?m.Row:k;if(c){if(p.isValidElement(c)){if(h){c=p.cloneElement(c,a({column:true},h))}}else{c=d.createElement(m.FormLabel,Object.assign({column:!!h},h),c)}}var I=u?m.InputGroup:p.Fragment;var A=u?{size:u.size}:undefined;if(u){if(u.pre){u.pre=d.createElement(m.InputGroup.Prepend,null,p.isValidElement(u.pre)?u.pre:d.createElement(m.InputGroup.Text,null,u.pre))}if(u.end){u.end=d.createElement(m.InputGroup.Append,null,p.isValidElement(u.end)?u.end:d.createElement(m.InputGroup.Text,null,u.end))}}else{u={}}if(v&&!p.isValidElement(v)){v=d.createElement(m.FormText,{className:"text-muted"},v)}if(!l.name){var R=this.latestValidationProps=this.fetchCurrentValidationProps(N),Y=R.groupProps,L=R.error;Promise.resolve().then(function(){if(!f(o.latestValidationProps,o.fetchCurrentValidationProps(N))){o.forceUpdate()}});return d.createElement(C,{value:{registerField:this.registerField}},d.createElement(m.FormGroup,Object.assign({},S,Y,{as:w}),c,d.createElement(O,b,d.createElement(I,A,u.pre,s,u.end),L||v),V))}var U=typeof s==="function"?s:p.Children.only(s);var H=G(U);if(H===_){if(U.props.as==="select"&&U.props.multiple){H="multipleSelect"}}switch(H){case x:case T:case"checkbox":case"radio":S.__TYPE__="checked";break;case"multipleSelect":S.__TYPE__="array";break;case $:case j:if(U.props.type!=="radio"){S.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":S.__TYPE__=H;break}return d.createElement(r.EasyField,Object.assign({},S,{passUtil:"$fieldutil",render:function e(r){var a,s;var f=l.valuePropName,h=f===void 0?"value":f,y=l.changePropName,g=y===void 0?"onChange":y,k=l.focusPropName,C=k===void 0?"onFocus":k,P=l.blurPropName,F=P===void 0?"onBlur":P;var _=r.$fieldutil,x=r[g],$=r[C],T=r[F],j=r[h],G=i(r,["$fieldutil",g,C,F,h].map(n));var B=_.$invalid,R=_.$dirty,Y=_.$touched,L=_.$focused,z=_.$getFirstError;var M;switch(S.__TYPE__){case"checked":case"checkbox":case"radio":var W=l.checked,D=W===void 0?true:W,K=l.unchecked,J=K===void 0?false:K;M={checked:j===D,onChange:function e(r){var t=r&&r.target?r.target.checked:r;x(t?D:J,r)}};break;default:M=(a={onCompositionEnd:function e(r){o.isComposition=false;delete o.compositionValue;x(r)},onCompositionStart:function e(){return o.isComposition=true}},t(a,g,H==="multipleSelect"?function(e){x([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(o.isComposition){o.compositionValue=e.target[h];o.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}x.apply(void 0,[e].concat(t))}}),t(a,h,"compositionValue"in o?o.compositionValue:j),t(a,"name",S.name),a);break}var Q=o.getValidationProps(N,B,R,Y,L,z()),X=Q.groupProps,Z=Q.validationProps,ee=Q.error;Object.assign(M,(s={},t(s,C,$),t(s,F,T),s),Z);var re=typeof U==="function"?U(M):p.cloneElement(U,M);return d.createElement(E,null,function(e){var r=e.registerField;if(q){o.$fieldutil=_;o.registerAncestorField=r;return re}return d.createElement(m.FormGroup,Object.assign({},G,X,{as:w}),c,d.createElement(O,b,d.createElement(I,A,u.pre,re,u.end),ee||v),V)})}}))}}]);return v}(p.Component);g(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");g(".has-error .invalid-feedback","display: block");var N=function(e){c(r,e);function r(){o(this,r);return s(this,u(r).apply(this,arguments))}l(r,[{key:"render",value:function e(){var r=this.props,t=r.children,n=r.name,a=r.onChange,i=r.value,o=r.onFocus,l=r.onBlur,s=r.isValid,u=r.isInvalid;var c=function e(r){a(r.target.value,r)};return p.Children.map(t,function(e){var r=e.props.value;return p.cloneElement(e,{isValid:s,isInvalid:u,checked:i===r,onChange:c,onFocus:o,onBlur:l,name:n})})}}]);return r}(p.Component);Object.keys(r).forEach(function(e){if(e!=="default")Object.defineProperty(exports,e,{enumerable:true,get:function(){return r[e]}})});exports.CheckboxGroup=h;exports.FormGroup=B;exports.RadioGroup=N;exports.SwitchGroup=h;exports.setErrorLevel=F;
