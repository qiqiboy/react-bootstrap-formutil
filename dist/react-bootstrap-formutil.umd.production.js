(function(e,r){typeof exports==="object"&&typeof module!=="undefined"?r(exports,require("react-formutil"),require("react"),require("react-bootstrap")):typeof define==="function"&&define.amd?define(["exports","react-formutil","react","react-bootstrap"],r):(e=e||self,r(e.ReactBootstrapFormutil={},e.ReactFormutil,e.React,e.ReactBootstrap))})(this,(function(e,r,t,n){"use strict";var o="default"in t?t["default"]:t;function a(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var i=a;function u(e,r){return r={exports:{}},e(r,r.exports),r.exports}var c=u((function(e){function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=r=function e(r){return typeof r}}else{e.exports=r=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return r(t)}e.exports=r}));function l(e,r){if(c(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(c(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var f=l;function s(e){var r=f(e,"string");return c(r)==="symbol"?r:String(r)}var p=s;function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}));t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){d(Object(t),true).forEach((function(r){i(e,r,t[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}}return e}var m=v;function y(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}var b=y;function h(e,r){if(e==null)return{};var t=b(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}var g=h;function O(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var S=O;function E(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function P(e,r,t){if(r)E(e.prototype,r);if(t)E(e,t);return e}var j=P;var $=u((function(e){function r(t){e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return r(t)}e.exports=r}));function k(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}var w=k;function C(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var _=C;function x(e,r){if(r&&(c(r)==="object"||typeof r==="function")){return r}return _(e)}var F=x;function V(e){return function(){var r=$(e),t;if(w()){var n=$(this).constructor;t=Reflect.construct(r,arguments,n)}else{t=r.apply(this,arguments)}return F(this,t)}}var R=V;var T=u((function(e){function r(t,n){e.exports=r=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return r(t,n)}e.exports=r}));function A(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)T(e,r)}var B=A;var M="function"===typeof Symbol&&Symbol.for,G=M?Symbol.for("react.element"):60103,I=M?Symbol.for("react.portal"):60106,N=M?Symbol.for("react.fragment"):60107,z=M?Symbol.for("react.strict_mode"):60108,D=M?Symbol.for("react.profiler"):60114,L=M?Symbol.for("react.provider"):60109,Y=M?Symbol.for("react.context"):60110,U=M?Symbol.for("react.async_mode"):60111,q=M?Symbol.for("react.concurrent_mode"):60111,H=M?Symbol.for("react.forward_ref"):60112,W=M?Symbol.for("react.suspense"):60113,J=M?Symbol.for("react.suspense_list"):60120,K=M?Symbol.for("react.memo"):60115,Q=M?Symbol.for("react.lazy"):60116,X=M?Symbol.for("react.block"):60121,Z=M?Symbol.for("react.fundamental"):60117,ee=M?Symbol.for("react.responder"):60118,re=M?Symbol.for("react.scope"):60119;function te(e){if("object"===typeof e&&null!==e){var r=e.$$typeof;switch(r){case G:switch(e=e.type,e){case U:case q:case N:case D:case z:case W:return e;default:switch(e=e&&e.$$typeof,e){case Y:case H:case Q:case K:case L:return e;default:return r}}case I:return r}}}function ne(e){return te(e)===q}var oe=U;var ae=q;var ie=Y;var ue=L;var ce=G;var le=H;var fe=N;var se=Q;var pe=K;var de=I;var ve=D;var me=z;var ye=W;var be=function(e){return ne(e)||te(e)===U};var he=ne;var ge=function(e){return te(e)===Y};var Oe=function(e){return te(e)===L};var Se=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===G};var Ee=function(e){return te(e)===H};var Pe=function(e){return te(e)===N};var je=function(e){return te(e)===Q};var $e=function(e){return te(e)===K};var ke=function(e){return te(e)===I};var we=function(e){return te(e)===D};var Ce=function(e){return te(e)===z};var _e=function(e){return te(e)===W};var xe=function(e){return"string"===typeof e||"function"===typeof e||e===N||e===q||e===D||e===z||e===W||e===J||"object"===typeof e&&null!==e&&(e.$$typeof===Q||e.$$typeof===K||e.$$typeof===L||e.$$typeof===Y||e.$$typeof===H||e.$$typeof===Z||e.$$typeof===ee||e.$$typeof===re||e.$$typeof===X)};var Fe=te;var Ve={AsyncMode:oe,ConcurrentMode:ae,ContextConsumer:ie,ContextProvider:ue,Element:ce,ForwardRef:le,Fragment:fe,Lazy:se,Memo:pe,Portal:de,Profiler:ve,StrictMode:me,Suspense:ye,isAsyncMode:be,isConcurrentMode:he,isContextConsumer:ge,isContextProvider:Oe,isElement:Se,isForwardRef:Ee,isFragment:Pe,isLazy:je,isMemo:$e,isPortal:ke,isProfiler:we,isStrictMode:Ce,isSuspense:_e,isValidElementType:xe,typeOf:Fe};var Re=u((function(e){{e.exports=Ve}}));var Te=Re.isValidElementType;var Ae=function(e){B(n,e);var r=R(n);function n(){S(this,n);return r.apply(this,arguments)}j(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,u=r.onFocus,c=r.onBlur,l=r.isValid,f=r.isInvalid;var s=function e(r){var t=r.target,n=t.checked,o=t.value;var u=i||[];a(n?u.concat(o):u.filter((function(e){return e!==o})))};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:f,checked:!!i&&i.indexOf(r)>-1,onChange:s,onFocus:u,onBlur:c,name:o})}))}}]);return n}(t.Component);Ae.formutilType="array";var Be;try{var Me=document.createElement("style");Me.type="text/css";document.getElementsByTagName("head")[0].appendChild(Me);Be=document.styleSheets[document.styleSheets.length-1]}catch(e){}function Ge(e,r){if(Be){if(Be.insertRule){Be.insertRule("".concat(e," { ").concat(r," }"),0)}else if(Be.addRule){Be.addRule(e,r,0)}}}var Ie=typeof Element!=="undefined";var Ne=typeof Map==="function";var ze=typeof Set==="function";var De=typeof ArrayBuffer==="function";function Le(e,r){if(e===r)return true;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return false;var t,n,o;if(Array.isArray(e)){t=e.length;if(t!=r.length)return false;for(n=t;n--!==0;)if(!Le(e[n],r[n]))return false;return true}var a;if(Ne&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return false;a=e.entries();while(!(n=a.next()).done)if(!r.has(n.value[0]))return false;a=e.entries();while(!(n=a.next()).done)if(!Le(n.value[1],r.get(n.value[0])))return false;return true}if(ze&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return false;a=e.entries();while(!(n=a.next()).done)if(!r.has(n.value[0]))return false;return true}if(De&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){t=e.length;if(t!=r.length)return false;for(n=t;n--!==0;)if(e[n]!==r[n])return false;return true}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();o=Object.keys(e);t=o.length;if(t!==Object.keys(r).length)return false;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return false;if(Ie&&e instanceof Element)return false;for(n=t;n--!==0;){if(o[n]==="_owner"&&e.$$typeof){continue}if(!Le(e[o[n]],r[o[n]]))return false}return true}return e!==e&&r!==r}var Ye=function e(r,t){try{return Le(r,t)}catch(e){if((e.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw e}};var Ue=t.createContext({}),qe=Ue.Consumer,He=Ue.Provider;var We=1;var Je=function e(r){We=r};var Ke=n.FormControl.Feedback;function Qe(e){if(e){var r=e.type;if(Te(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var Xe=function(e){B(u,e);var a=R(u);function u(){var e;S(this,u);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++){t[n]=arguments[n]}e=a.call.apply(a,[this].concat(t));e.fields={};e.registerField=function(r,t){return t?e.fields[r]=t:delete e.fields[r]};e.latestValidationProps=null;e.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};e.fetchCurrentValidationProps=function(r){var t=Object.keys(e.fields).map((function(r){return e.fields[r].$new()}));var n=t.filter((function(e){return e.$invalid}));var o=n.length>0;var a=t.some((function(e){return e.$dirty}));var i=t.some((function(e){return e.$touched}));var u=t.some((function(e){return e.$focused}));var c=n.map((function(t){var n=t.$invalid,o=t.$focused,a=t.$touched,i=t.$dirty,u=t.$getFirstError;var c=e.checkHasError(r,n,i,a,o);return c&&u()})).filter(Boolean);return e.getValidationProps(r,o,a,i,u,c)};e.getValidationProps=function(r,t,n,a,i,u){var c=e.checkHasError(r,t,n,a,i);var l={className:[e.props.className,c&&"has-error",t?"is-invalid":"is-valid",n?"is-dirty":"is-pristine",a?"is-touched":"is-untouched",i?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var f={};if(c){f.isInvalid=true}if(e.props.feedback&&!t){f.isValid=true}return{groupProps:l,validationProps:f,error:c?o.createElement(Ke,{type:"invalid"},Array.isArray(u)?u.map((function(e,r){return o.createElement("div",{key:r},e)})):u):null}};return e}j(u,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var a=this;var u=this.props;var c=u.children,l=u.addons,f=u.label,s=u.helper,d=u.labelCol,v=u.wrapperCol,y=u.validationState,b=u.className,h=u.as,O=u.feedback,S=u.extra,E=u.noStyle,P=u.errorLevel,j=P===void 0?We:P,$=g(u,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var k=v?n.Col:t.Fragment;var w=!h&&(d||v)?n.Row:h;if(f){if(t.isValidElement(f)){if(d){f=t.cloneElement(f,m({column:true},d))}}else{f=o.createElement(n.FormLabel,Object.assign({column:!!d},d),f)}}var C=l?n.InputGroup:t.Fragment;var _=l?{size:l.size}:undefined;if(l){if(l.pre){l.pre=o.createElement(n.InputGroup.Prepend,null,t.isValidElement(l.pre)?l.pre:o.createElement(n.InputGroup.Text,null,l.pre))}if(l.end){l.end=o.createElement(n.InputGroup.Append,null,t.isValidElement(l.end)?l.end:o.createElement(n.InputGroup.Text,null,l.end))}}else{l={}}if(s&&!t.isValidElement(s)){s=o.createElement(n.FormText,{className:"text-muted"},s)}if(!u.name){var x=this.latestValidationProps=this.fetchCurrentValidationProps(j),F=x.groupProps,V=x.error;Promise.resolve().then((function(){if(!Ye(a.latestValidationProps,a.fetchCurrentValidationProps(j))){a.forceUpdate()}}));return o.createElement(He,{value:this.registerField},o.createElement(n.FormGroup,Object.assign({},$,F,{as:w}),f,o.createElement(k,v,o.createElement(C,_,l.pre,typeof c==="function"?c():c,l.end),V||s),S))}if(u.$memo===true){$.__DIFF__=c}var R=typeof c==="function"?c:t.Children.only(c);var T=Qe(R);if(T===n.FormControl){if(R.props.as==="select"&&R.props.multiple){T="multipleSelect"}}switch(T){case n.FormCheck:case n.ToggleButton:case"checkbox":case"radio":$.__TYPE__="checked";break;case"multipleSelect":$.__TYPE__="array";break;case Ae:case n.ToggleButtonGroup:if(R.props.type!=="radio"){$.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":$.__TYPE__=T;break}return o.createElement(r.EasyField,Object.assign({},$,{passUtil:"$fieldutil",render:function e(r){var c,d;var m=u.valuePropName,y=m===void 0?"value":m,b=u.changePropName,h=b===void 0?"onChange":b,O=u.focusPropName,P=O===void 0?"onFocus":O,x=u.blurPropName,F=x===void 0?"onBlur":x;var V=r.$fieldutil,A=r[h],B=r[P],M=r[F],G=r[y],I=g(r,["$fieldutil",h,P,F,y].map(p));var N=V.$invalid,z=V.$dirty,D=V.$touched,L=V.$focused,Y=V.$getFirstError;var U;switch($.__TYPE__){case"checked":case"checkbox":case"radio":var q=u.checked,H=q===void 0?true:q,W=u.unchecked,J=W===void 0?false:W;U={checked:G===H,onChange:function e(r){var t=r&&r.target?r.target.checked:r;A(t?H:J,r)}};break;default:U=(c={onCompositionEnd:function e(r){a.isComposition=false;delete a.compositionValue;A(r)},onCompositionStart:function e(){return a.isComposition=true}},i(c,h,T==="multipleSelect"?function(e){A([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(a.isComposition){a.compositionValue=e.target[y];a.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}A.apply(void 0,[e].concat(t))}}),i(c,y,"compositionValue"in a?a.compositionValue:G),i(c,F,(function(){if(a.isComposition){a.isComposition=false;delete a.compositionValue;A.apply(void 0,arguments)}return M.apply(void 0,arguments)})),i(c,"name",$.name),c);break}var K=a.getValidationProps(j,N,z,D,L,Y()),Q=K.groupProps,X=K.validationProps,Z=K.error;Object.assign((d={},i(d,P,B),i(d,F,M),d),U,X);var ee=typeof R==="function"?R(U):t.cloneElement(R,U);return o.createElement(qe,null,(function(e){if(E){a.$fieldutil=V;a.registerAncestorField=e;return ee}return o.createElement(n.FormGroup,Object.assign({},I,Q,{as:w}),f,o.createElement(k,v,o.createElement(C,_,l.pre,ee,l.end),Z||s),S)}))}}))}}]);return u}(t.Component);Ge(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");Ge(".has-error .invalid-feedback","display: block");var Ze=function(e){B(n,e);var r=R(n);function n(){S(this,n);return r.apply(this,arguments)}j(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,u=r.onFocus,c=r.onBlur,l=r.isValid,f=r.isInvalid;var s=function e(r){a(r.target.value,r)};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:f,checked:i===r,onChange:s,onFocus:u,onBlur:c,name:o})}))}}]);return n}(t.Component);Object.keys(r).forEach((function(t){if(t!=="default")Object.defineProperty(e,t,{enumerable:true,get:function(){return r[t]}})}));e.CheckboxGroup=Ae;e.FormGroup=Xe;e.RadioGroup=Ze;e.SwitchGroup=Ae;e.setErrorLevel=Je;Object.defineProperty(e,"__esModule",{value:true})}));
