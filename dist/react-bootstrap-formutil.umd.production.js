(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports,require("react-formutil"),require("react"),require("react-bootstrap")):typeof define==="function"&&define.amd?define(["exports","react-formutil","react","react-bootstrap"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.ReactBootstrapFormutil={},e.ReactFormutil,e.React,e.ReactBootstrap))})(this,(function(e,t,r,n){"use strict";function o(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var a=o(r);function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}var s=60103,l=60106,c=60107,u=60108,f=60114,p=60109,d=60110,m=60112,h=60113,v=60120,y=60115,g=60116,b=60121,E=60122,$=60117,C=60129,k=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;s=_("react.element");l=_("react.portal");c=_("react.fragment");u=_("react.strict_mode");f=_("react.profiler");p=_("react.provider");d=_("react.context");m=_("react.forward_ref");h=_("react.suspense");v=_("react.suspense_list");y=_("react.memo");g=_("react.lazy");b=_("react.block");E=_("react.server.block");$=_("react.fundamental");C=_("react.debug_trace_mode");k=_("react.legacy_hidden")}function P(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type,e){case c:case f:case u:case h:case v:return e;default:switch(e=e&&e.$$typeof,e){case d:case m:case g:case y:case p:return e;default:return t}}case l:return t}}}var F=p,V=s,x=m,w=c,S=g,O=y,j=l,T=f,B=u,A=h;var R=d;var M=F;var G=V;var z=x;var I=w;var L=S;var N=O;var Y=j;var U=T;var q=B;var H=A;var D=function(){return!1};var W=function(){return!1};var J=function(e){return P(e)===d};var K=function(e){return P(e)===p};var Q=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===s};var X=function(e){return P(e)===m};var Z=function(e){return P(e)===c};var ee=function(e){return P(e)===g};var te=function(e){return P(e)===y};var re=function(e){return P(e)===l};var ne=function(e){return P(e)===f};var oe=function(e){return P(e)===u};var ae=function(e){return P(e)===h};var ie=function(e){return"string"===typeof e||"function"===typeof e||e===c||e===f||e===C||e===u||e===h||e===v||e===k||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===p||e.$$typeof===d||e.$$typeof===m||e.$$typeof===$||e.$$typeof===b||e[0]===E)?!0:!1};var se=P;var le={ContextConsumer:R,ContextProvider:M,Element:G,ForwardRef:z,Fragment:I,Lazy:L,Memo:N,Portal:Y,Profiler:U,StrictMode:q,Suspense:H,isAsyncMode:D,isConcurrentMode:W,isContextConsumer:J,isContextProvider:K,isElement:Q,isForwardRef:X,isFragment:Z,isLazy:ee,isMemo:te,isPortal:re,isProfiler:ne,isStrictMode:oe,isSuspense:ae,isValidElementType:ie,typeOf:se};var ce=le;var ue=i((function(e){{e.exports=ce}}));var fe=ue;var pe=typeof Element!=="undefined";var de=typeof Map==="function";var me=typeof Set==="function";var he=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function ve(e,t){if(e===t)return true;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return false;var r,n,o;if(Array.isArray(e)){r=e.length;if(r!=t.length)return false;for(n=r;n--!==0;)if(!ve(e[n],t[n]))return false;return true}var a;if(de&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return false;a=e.entries();while(!(n=a.next()).done)if(!t.has(n.value[0]))return false;a=e.entries();while(!(n=a.next()).done)if(!ve(n.value[1],t.get(n.value[0])))return false;return true}if(me&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return false;a=e.entries();while(!(n=a.next()).done)if(!t.has(n.value[0]))return false;return true}if(he&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){r=e.length;if(r!=t.length)return false;for(n=r;n--!==0;)if(e[n]!==t[n])return false;return true}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf==="function"&&typeof t.valueOf==="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString==="function"&&typeof t.toString==="function")return e.toString()===t.toString();o=Object.keys(e);r=o.length;if(r!==Object.keys(t).length)return false;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return false;if(pe&&e instanceof Element)return false;for(n=r;n--!==0;){if((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof){continue}if(!ve(e[o[n]],t[o[n]]))return false}return true}return e!==e&&t!==t}var ye=function e(t,r){try{return ve(t,r)}catch(e){if((e.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw e}};var ge=ye;class be extends r.Component{render(){const{children:e,name:t,onChange:n,value:o,onFocus:a,onBlur:i,isValid:s,isInvalid:l}=this.props;const c=e=>{const{checked:t,value:r}=e.target;const a=o||[];n(t?a.concat(r):a.filter((e=>e!==r)))};return r.Children.map(e,(e=>{const n=e.props.value;return r.cloneElement(e,{isValid:s,isInvalid:l,checked:!!o&&o.indexOf(n)>-1,onChange:c,onFocus:a,onBlur:i,name:t})}))}}be.formutilType="array";var Ee=be;let $e;try{const e=document.createElement("style");e.type="text/css";document.getElementsByTagName("head")[0].appendChild(e);$e=e.sheet||e.styleSheet}catch(e){}function Ce(e,t){if($e){if($e.insertRule){$e.insertRule(`${e} { ${t} }`,0)}else if($e.addRule){$e.addRule(e,t,0)}}}const{isValidElementType:ke}=fe;const{Consumer:_e,Provider:Pe}=r.createContext({});let Fe=1;const Ve=function(e){Fe=e};const xe=n.FormControl.Feedback;function we(e){if(e){const t=e.type;if(ke(t)){if(t.formutilType){return t.formutilType}if(typeof t==="string"&&e.props.type){return e.props.type}}return t||e}}class Se extends r.Component{constructor(){super(...arguments);this.fields={};this.registerField=(e,t)=>t?this.fields[e]=t:delete this.fields[e];this.latestValidationProps=null;this.checkHasError=(e,t,r,n,o)=>{switch(e){case 0:return t&&r&&n;case 1:return t&&r;case 2:return t;default:return false}};this.fetchCurrentValidationProps=e=>{const t=Object.keys(this.fields).map((e=>this.fields[e].$new()));const r=t.filter((e=>e.$invalid));const n=r.length>0;const o=t.some((e=>e.$dirty));const a=t.some((e=>e.$touched));const i=t.some((e=>e.$focused));const s=r.map((t=>{const{$invalid:r,$focused:n,$touched:o,$dirty:a,$getFirstError:i}=t;const s=this.checkHasError(e,r,a,o,n);return s&&i()})).filter(Boolean);return this.getValidationProps(e,n,o,a,i,s)};this.getValidationProps=(e,t,r,n,o,i)=>{const s=this.checkHasError(e,t,r,n,o);const l={className:[this.props.className,s&&"has-error",t?"is-invalid":"is-valid",r?"is-dirty":"is-pristine",n?"is-touched":"is-untouched",o?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};const c={};if(s){c.isInvalid=true}if(this.props.feedback&&!t){c.isValid=true}return{groupProps:l,validationProps:c,error:s?a["default"].createElement(xe,{type:"invalid"},Array.isArray(i)?i.map(((e,t)=>a["default"].createElement("div",{key:t},e))):i):null}}}componentDidMount(){var e;(e=this.registerAncestorField)===null||e===void 0?void 0:e.call(this,this.props.name,this.$fieldutil)}componentWillUnmount(){var e;(e=this.registerAncestorField)===null||e===void 0?void 0:e.call(this,this.props.name,null)}render(){var e=this;const o=this.props;let{children:i,addons:s,label:l,helper:c,labelCol:u,wrapperCol:f,validationState:p,className:d,as:m,feedback:h,floatingLabel:v,extra:y,noStyle:g,errorLevel:b=Fe,...E}=o;let $=f?n.Col:r.Fragment;const C=!m&&(u||f)?n.Row:m;if(l){if(r.isValidElement(l)){if(u){l=r.cloneElement(l,{column:true,...u})}}else{l=a["default"].createElement(n.FormLabel,Object.assign({column:!!u},u),l)}}let k=s?n.InputGroup:r.Fragment;let _=s?{size:s.size}:undefined;if(s){if(s.pre){s.pre=r.isValidElement(s.pre)?s.pre:a["default"].createElement(n.InputGroup.Text,null,s.pre)}if(s.end){s.end=r.isValidElement(s.end)?s.end:a["default"].createElement(n.InputGroup.Text,null,s.end)}}else{s={}}if(c&&!r.isValidElement(c)){c=a["default"].createElement(n.FormText,{muted:true},c)}if(!o.name){const{groupProps:e,error:t}=this.latestValidationProps=this.fetchCurrentValidationProps(b);Promise.resolve().then((()=>{if(!ge(this.latestValidationProps,this.fetchCurrentValidationProps(b))){this.forceUpdate()}}));const r=typeof i==="function"?i():i;return a["default"].createElement(Pe,{value:this.registerField},a["default"].createElement(n.FormGroup,Object.assign({},E,e,{as:C}),l,a["default"].createElement($,f,a["default"].createElement(k,_,s.pre,r,s.end),t||c),y))}if(E.$memo===true){E.__DIFF__={childList:i,compositionValue:this.compositionValue}}else if(Array.isArray(E.$memo)){E.$memo=E.$memo.concat(this.compositionValue)}const P=typeof i==="function"?i:r.Children.only(i);let F=we(P);if((F===n.FormControl&&P.props.as==="select"||F===n.FormSelect)&&P.props.multiple){F="multipleSelect"}switch(F){case n.FormCheck:case n.ToggleButton:case"checkbox":case"radio":E.__TYPE__="checked";break;case"multipleSelect":E.__TYPE__="array";break;case Ee:case n.ToggleButtonGroup:if(P.props.type!=="radio"){E.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":E.__TYPE__=F;break}return a["default"].createElement(t.EasyField,Object.assign({},E,{passUtil:"$fieldutil",render:t=>{const{valuePropName:i="value",changePropName:u="onChange",focusPropName:p="onFocus",blurPropName:d="onBlur"}=o;const{$fieldutil:m,[u]:h,[p]:V,[d]:x,[i]:w,...S}=t;const{$invalid:O,$dirty:j,$touched:T,$focused:B,$getFirstError:A}=m;let R;switch(E.__TYPE__){case"checked":case"checkbox":case"radio":const{checked:t=true,unchecked:r=false}=o;R={checked:w===t,onChange:e=>{const n=e&&e.target?e.target.checked:e;h(n?t:r,e)}};break;default:R={onCompositionEnd:e=>{this.isComposing=false;delete this.compositionValue;h(e)},onCompositionStart:()=>this.isComposing=true,[u]:F==="multipleSelect"?e=>{h([].slice.call(e.target.options).filter((e=>e.selected)).map((e=>e.value)),e)}:function(t){if(e.isComposing){e.compositionValue=t.target[i];e.forceUpdate()}else{for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++){n[o-1]=arguments[o]}h(t,...n)}},[i]:"compositionValue"in this?this.compositionValue:w,[d]:function(){if(e.isComposing){e.isComposing=false;delete e.compositionValue;h(...arguments)}return x(...arguments)},name:E.name};break}const{groupProps:M,validationProps:G,error:z}=this.getValidationProps(b,O,j,T,B,A());R=Object.assign({[p]:V,[d]:x},R,G);const I=typeof P==="function"?P(R):r.cloneElement(P,R);return a["default"].createElement(_e,null,(e=>{if(g){this.$fieldutil=m;this.registerAncestorField=e;return I}return a["default"].createElement(n.FormGroup,Object.assign({},S,M,{as:C}),!v&&l,a["default"].createElement($,f,a["default"].createElement(k,_,s.pre,v&&l?a["default"].createElement(n.FloatingLabel,{label:l.props.children},I):I,s.end),z||c),y)}))}}))}}var Oe=Se;Ce(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");Ce(".has-error .invalid-feedback","display: block");class je extends r.Component{render(){const{children:e,name:t,onChange:n,value:o,onFocus:a,onBlur:i,isValid:s,isInvalid:l}=this.props;const c=e=>{n(e.target.value,e)};return r.Children.map(e,(e=>{const n=e.props.value;return r.cloneElement(e,{isValid:s,isInvalid:l,checked:o===n,onChange:c,onFocus:a,onBlur:i,name:t})}))}}var Te=je;e.CheckboxGroup=Ee;e.FormGroup=Oe;e.RadioGroup=Te;e.SwitchGroup=Ee;e.setErrorLevel=Ve;Object.keys(t).forEach((function(r){if(r!=="default"&&!e.hasOwnProperty(r))Object.defineProperty(e,r,{enumerable:true,get:function(){return t[r]}})}));Object.defineProperty(e,"__esModule",{value:true})}));
