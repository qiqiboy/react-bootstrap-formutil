(function(e,r){typeof exports==="object"&&typeof module!=="undefined"?r(exports,require("react-formutil"),require("react"),require("react-bootstrap")):typeof define==="function"&&define.amd?define(["exports","react-formutil","react","react-bootstrap"],r):(e=typeof globalThis!=="undefined"?globalThis:e||self,r(e.ReactBootstrapFormutil={},e.ReactFormutil,e.React,e.ReactBootstrap))})(this,(function(e,r,t,n){"use strict";function o(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var a=o(t);function i(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var u=i;function c(e,r){return r={exports:{}},e(r,r.exports),r.exports}var l=c((function(e){function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=r=function e(r){return typeof r}}else{e.exports=r=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return r(t)}e.exports=r}));function s(e,r){if(l(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(l(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var f=s;function p(e){var r=f(e,"string");return l(r)==="symbol"?r:String(r)}var d=p;function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}));t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){v(Object(t),true).forEach((function(r){u(e,r,t[r])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}}return e}var y=m;function h(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}var b=h;function g(e,r){if(e==null)return{};var t=b(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}var P=g;function E(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var O=E;function C(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function j(e,r,t){if(r)C(e.prototype,r);if(t)C(e,t);return e}var k=j;var w=c((function(e){function r(t,n){e.exports=r=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return r(t,n)}e.exports=r}));function $(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)w(e,r)}var _=$;var x=c((function(e){function r(t){e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return r(t)}e.exports=r}));function S(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}var F=S;function V(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var T=V;function R(e,r){if(r&&(l(r)==="object"||typeof r==="function")){return r}return T(e)}var A=R;function M(e){var r=F();return function t(){var n=x(e),o;if(r){var a=x(this).constructor;o=Reflect.construct(n,arguments,a)}else{o=n.apply(this,arguments)}return A(this,o)}}var B=M;var G=60103,I=60106,z=60107,N=60108,L=60114,D=60109,Y=60110,U=60112,q=60113,H=60120,W=60115,J=60116,K=60121,Q=60122,X=60117,Z=60129,ee=60131;if("function"===typeof Symbol&&Symbol.for){var re=Symbol.for;G=re("react.element");I=re("react.portal");z=re("react.fragment");N=re("react.strict_mode");L=re("react.profiler");D=re("react.provider");Y=re("react.context");U=re("react.forward_ref");q=re("react.suspense");H=re("react.suspense_list");W=re("react.memo");J=re("react.lazy");K=re("react.block");Q=re("react.server.block");X=re("react.fundamental");Z=re("react.debug_trace_mode");ee=re("react.legacy_hidden")}function te(e){if("object"===typeof e&&null!==e){var r=e.$$typeof;switch(r){case G:switch(e=e.type,e){case z:case L:case N:case q:case H:return e;default:switch(e=e&&e.$$typeof,e){case Y:case U:case J:case W:case D:return e;default:return r}}case I:return r}}}var ne=D,oe=G,ae=U,ie=z,ue=J,ce=W,le=I,se=L,fe=N,pe=q;var de=Y;var ve=ne;var me=oe;var ye=ae;var he=ie;var be=ue;var ge=ce;var Pe=le;var Ee=se;var Oe=fe;var Ce=pe;var je=function(){return!1};var ke=function(){return!1};var we=function(e){return te(e)===Y};var $e=function(e){return te(e)===D};var _e=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===G};var xe=function(e){return te(e)===U};var Se=function(e){return te(e)===z};var Fe=function(e){return te(e)===J};var Ve=function(e){return te(e)===W};var Te=function(e){return te(e)===I};var Re=function(e){return te(e)===L};var Ae=function(e){return te(e)===N};var Me=function(e){return te(e)===q};var Be=function(e){return"string"===typeof e||"function"===typeof e||e===z||e===L||e===Z||e===N||e===q||e===H||e===ee||"object"===typeof e&&null!==e&&(e.$$typeof===J||e.$$typeof===W||e.$$typeof===D||e.$$typeof===Y||e.$$typeof===U||e.$$typeof===X||e.$$typeof===K||e[0]===Q)?!0:!1};var Ge=te;var Ie={ContextConsumer:de,ContextProvider:ve,Element:me,ForwardRef:ye,Fragment:he,Lazy:be,Memo:ge,Portal:Pe,Profiler:Ee,StrictMode:Oe,Suspense:Ce,isAsyncMode:je,isConcurrentMode:ke,isContextConsumer:we,isContextProvider:$e,isElement:_e,isForwardRef:xe,isFragment:Se,isLazy:Fe,isMemo:Ve,isPortal:Te,isProfiler:Re,isStrictMode:Ae,isSuspense:Me,isValidElementType:Be,typeOf:Ge};var ze=c((function(e,r){}));var Ne=ze.ContextConsumer;var Le=ze.ContextProvider;var De=ze.Element;var Ye=ze.ForwardRef;var Ue=ze.Fragment;var qe=ze.Lazy;var He=ze.Memo;var We=ze.Portal;var Je=ze.Profiler;var Ke=ze.StrictMode;var Qe=ze.Suspense;var Xe=ze.isAsyncMode;var Ze=ze.isConcurrentMode;var er=ze.isContextConsumer;var rr=ze.isContextProvider;var tr=ze.isElement;var nr=ze.isForwardRef;var or=ze.isFragment;var ar=ze.isLazy;var ir=ze.isMemo;var ur=ze.isPortal;var cr=ze.isProfiler;var lr=ze.isStrictMode;var sr=ze.isSuspense;var fr=ze.isValidElementType;var pr=ze.typeOf;var dr=c((function(e){{e.exports=Ie}}));var vr=typeof Element!=="undefined";var mr=typeof Map==="function";var yr=typeof Set==="function";var hr=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function br(e,r){if(e===r)return true;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return false;var t,n,o;if(Array.isArray(e)){t=e.length;if(t!=r.length)return false;for(n=t;n--!==0;)if(!br(e[n],r[n]))return false;return true}var a;if(mr&&e instanceof Map&&r instanceof Map){if(e.size!==r.size)return false;a=e.entries();while(!(n=a.next()).done)if(!r.has(n.value[0]))return false;a=e.entries();while(!(n=a.next()).done)if(!br(n.value[1],r.get(n.value[0])))return false;return true}if(yr&&e instanceof Set&&r instanceof Set){if(e.size!==r.size)return false;a=e.entries();while(!(n=a.next()).done)if(!r.has(n.value[0]))return false;return true}if(hr&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){t=e.length;if(t!=r.length)return false;for(n=t;n--!==0;)if(e[n]!==r[n])return false;return true}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();o=Object.keys(e);t=o.length;if(t!==Object.keys(r).length)return false;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return false;if(vr&&e instanceof Element)return false;for(n=t;n--!==0;){if((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof){continue}if(!br(e[o[n]],r[o[n]]))return false}return true}return e!==e&&r!==r}var gr=function e(r,t){try{return br(r,t)}catch(e){if((e.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw e}};var Pr=function(e){_(n,e);var r=B(n);function n(){O(this,n);return r.apply(this,arguments)}k(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,u=r.onFocus,c=r.onBlur,l=r.isValid,s=r.isInvalid;var f=function e(r){var t=r.target,n=t.checked,o=t.value;var u=i||[];a(n?u.concat(o):u.filter((function(e){return e!==o})))};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:s,checked:!!i&&i.indexOf(r)>-1,onChange:f,onFocus:u,onBlur:c,name:o})}))}}]);return n}(t.Component);Pr.formutilType="array";var Er;try{var Or=document.createElement("style");Or.type="text/css";document.getElementsByTagName("head")[0].appendChild(Or);Er=document.styleSheets[document.styleSheets.length-1]}catch(e){}function Cr(e,r){if(Er){if(Er.insertRule){Er.insertRule("".concat(e," { ").concat(r," }"),0)}else if(Er.addRule){Er.addRule(e,r,0)}}}var jr=dr.isValidElementType;var kr=t.createContext({}),wr=kr.Consumer,$r=kr.Provider;var _r=1;var xr=function e(r){_r=r};var Sr=n.FormControl.Feedback;function Fr(e){if(e){var r=e.type;if(jr(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var Vr=function(e){_(i,e);var o=B(i);function i(){var e;O(this,i);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++){t[n]=arguments[n]}e=o.call.apply(o,[this].concat(t));e.fields={};e.registerField=function(r,t){return t?e.fields[r]=t:delete e.fields[r]};e.latestValidationProps=null;e.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};e.fetchCurrentValidationProps=function(r){var t=Object.keys(e.fields).map((function(r){return e.fields[r].$new()}));var n=t.filter((function(e){return e.$invalid}));var o=n.length>0;var a=t.some((function(e){return e.$dirty}));var i=t.some((function(e){return e.$touched}));var u=t.some((function(e){return e.$focused}));var c=n.map((function(t){var n=t.$invalid,o=t.$focused,a=t.$touched,i=t.$dirty,u=t.$getFirstError;var c=e.checkHasError(r,n,i,a,o);return c&&u()})).filter(Boolean);return e.getValidationProps(r,o,a,i,u,c)};e.getValidationProps=function(r,t,n,o,i,u){var c=e.checkHasError(r,t,n,o,i);var l={className:[e.props.className,c&&"has-error",t?"is-invalid":"is-valid",n?"is-dirty":"is-pristine",o?"is-touched":"is-untouched",i?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var s={};if(c){s.isInvalid=true}if(e.props.feedback&&!t){s.isValid=true}return{groupProps:l,validationProps:s,error:c?a["default"].createElement(Sr,{type:"invalid"},Array.isArray(u)?u.map((function(e,r){return a["default"].createElement("div",{key:r},e)})):u):null}};return e}k(i,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var o=this;var i=this.props;var c=i.children,l=i.addons,s=i.label,f=i.helper,p=i.labelCol,v=i.wrapperCol,m=i.validationState,h=i.className,b=i.as,g=i.feedback,E=i.extra,O=i.noStyle,C=i.errorLevel,j=C===void 0?_r:C,k=P(i,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var w=v?n.Col:t.Fragment;var $=!b&&(p||v)?n.Row:b;if(s){if(t.isValidElement(s)){if(p){s=t.cloneElement(s,y({column:true},p))}}else{s=a["default"].createElement(n.FormLabel,Object.assign({column:!!p},p),s)}}var _=l?n.InputGroup:t.Fragment;var x=l?{size:l.size}:undefined;if(l){if(l.pre){l.pre=a["default"].createElement(n.InputGroup.Prepend,null,t.isValidElement(l.pre)?l.pre:a["default"].createElement(n.InputGroup.Text,null,l.pre))}if(l.end){l.end=a["default"].createElement(n.InputGroup.Append,null,t.isValidElement(l.end)?l.end:a["default"].createElement(n.InputGroup.Text,null,l.end))}}else{l={}}if(f&&!t.isValidElement(f)){f=a["default"].createElement(n.FormText,{className:"text-muted"},f)}if(!i.name){var S=this.latestValidationProps=this.fetchCurrentValidationProps(j),F=S.groupProps,V=S.error;Promise.resolve().then((function(){if(!gr(o.latestValidationProps,o.fetchCurrentValidationProps(j))){o.forceUpdate()}}));return a["default"].createElement($r,{value:this.registerField},a["default"].createElement(n.FormGroup,Object.assign({},k,F,{as:$}),s,a["default"].createElement(w,v,a["default"].createElement(_,x,l.pre,typeof c==="function"?c():c,l.end),V||f),E))}if(k.$memo===true){k.__DIFF__={childList:c,compositionValue:this.compositionValue}}else if(Array.isArray(k.$memo)){k.$memo=k.$memo.concat(this.compositionValue)}var T=typeof c==="function"?c:t.Children.only(c);var R=Fr(T);if(R===n.FormControl){if(T.props.as==="select"&&T.props.multiple){R="multipleSelect"}}switch(R){case n.FormCheck:case n.ToggleButton:case"checkbox":case"radio":k.__TYPE__="checked";break;case"multipleSelect":k.__TYPE__="array";break;case Pr:case n.ToggleButtonGroup:if(T.props.type!=="radio"){k.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":k.__TYPE__=R;break}return a["default"].createElement(r.EasyField,Object.assign({},k,{passUtil:"$fieldutil",render:function e(r){var c,p;var m=i.valuePropName,y=m===void 0?"value":m,h=i.changePropName,b=h===void 0?"onChange":h,g=i.focusPropName,C=g===void 0?"onFocus":g,S=i.blurPropName,F=S===void 0?"onBlur":S;var V=r.$fieldutil,A=r[b],M=r[C],B=r[F],G=r[y],I=P(r,["$fieldutil",b,C,F,y].map(d));var z=V.$invalid,N=V.$dirty,L=V.$touched,D=V.$focused,Y=V.$getFirstError;var U;switch(k.__TYPE__){case"checked":case"checkbox":case"radio":var q=i.checked,H=q===void 0?true:q,W=i.unchecked,J=W===void 0?false:W;U={checked:G===H,onChange:function e(r){var t=r&&r.target?r.target.checked:r;A(t?H:J,r)}};break;default:U=(c={onCompositionEnd:function e(r){o.isComposing=false;delete o.compositionValue;A(r)},onCompositionStart:function e(){return o.isComposing=true}},u(c,b,R==="multipleSelect"?function(e){A([].slice.call(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})),e)}:function(e){if(o.isComposing){o.compositionValue=e.target[y];o.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}A.apply(void 0,[e].concat(t))}}),u(c,y,"compositionValue"in o?o.compositionValue:G),u(c,F,(function(){if(o.isComposing){o.isComposing=false;delete o.compositionValue;A.apply(void 0,arguments)}return B.apply(void 0,arguments)})),u(c,"name",k.name),c);break}var K=o.getValidationProps(j,z,N,L,D,Y()),Q=K.groupProps,X=K.validationProps,Z=K.error;U=Object.assign((p={},u(p,C,M),u(p,F,B),p),U,X);var ee=typeof T==="function"?T(U):t.cloneElement(T,U);return a["default"].createElement(wr,null,(function(e){if(O){o.$fieldutil=V;o.registerAncestorField=e;return ee}return a["default"].createElement(n.FormGroup,Object.assign({},I,Q,{as:$}),s,a["default"].createElement(w,v,a["default"].createElement(_,x,l.pre,ee,l.end),Z||f),E)}))}}))}}]);return i}(t.Component);Cr(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");Cr(".has-error .invalid-feedback","display: block");var Tr=function(e){_(n,e);var r=B(n);function n(){O(this,n);return r.apply(this,arguments)}k(n,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,u=r.onFocus,c=r.onBlur,l=r.isValid,s=r.isInvalid;var f=function e(r){a(r.target.value,r)};return t.Children.map(n,(function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:s,checked:i===r,onChange:f,onFocus:u,onBlur:c,name:o})}))}}]);return n}(t.Component);Object.keys(r).forEach((function(t){if(t!=="default")Object.defineProperty(e,t,{enumerable:true,get:function(){return r[t]}})}));e.CheckboxGroup=Pr;e.FormGroup=Vr;e.RadioGroup=Tr;e.SwitchGroup=Pr;e.setErrorLevel=xr;Object.defineProperty(e,"__esModule",{value:true})}));
