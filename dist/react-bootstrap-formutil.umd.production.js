(function(e,r){typeof exports==="object"&&typeof module!=="undefined"?r(exports,require("react-formutil"),require("react"),require("react-bootstrap")):typeof define==="function"&&define.amd?define(["exports","react-formutil","react","react-bootstrap"],r):(e=e||self,r(e.ReactBootstrapFormutil={},e.ReactFormutil,e.React,e.ReactBootstrap))})(this,function(e,r,t,n){"use strict";var o="default"in t?t["default"]:t;function a(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var i=a;function c(e,r){return r={exports:{}},e(r,r.exports),r.exports}var u=c(function(e){function r(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=r=function e(r){return typeof r}}else{e.exports=r=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return r(t)}e.exports=r});function l(e,r){if(u(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var n=t.call(e,r||"default");if(u(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var s=l;function f(e){var r=s(e,"string");return u(r)==="symbol"?r:String(r)}var p=f;function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r)n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable});t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){d(Object(t),true).forEach(function(r){i(e,r,t[r])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}}return e}var m=v;function y(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}var b=y;function h(e,r){if(e==null)return{};var t=b(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}var g=h;function E(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}var P=E;function O(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function S(e,r,t){if(r)O(e.prototype,r);if(t)O(e,t);return e}var $=S;function k(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var j=k;function C(e,r){if(r&&(u(r)==="object"||typeof r==="function")){return r}return j(e)}var _=C;var w=c(function(e){function r(t){e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return r(t)}e.exports=r});var x=c(function(e){function r(t,n){e.exports=r=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return r(t,n)}e.exports=r});function F(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)x(e,r)}var V=F;var T="function"===typeof Symbol&&Symbol.for,R=T?Symbol.for("react.element"):60103,A=T?Symbol.for("react.portal"):60106,B=T?Symbol.for("react.fragment"):60107,G=T?Symbol.for("react.strict_mode"):60108,I=T?Symbol.for("react.profiler"):60114,N=T?Symbol.for("react.provider"):60109,M=T?Symbol.for("react.context"):60110,D=T?Symbol.for("react.async_mode"):60111,L=T?Symbol.for("react.concurrent_mode"):60111,z=T?Symbol.for("react.forward_ref"):60112,Y=T?Symbol.for("react.suspense"):60113,U=T?Symbol.for("react.suspense_list"):60120,q=T?Symbol.for("react.memo"):60115,H=T?Symbol.for("react.lazy"):60116,W=T?Symbol.for("react.block"):60121,J=T?Symbol.for("react.fundamental"):60117,K=T?Symbol.for("react.responder"):60118,Q=T?Symbol.for("react.scope"):60119;function X(e){if("object"===typeof e&&null!==e){var r=e.$$typeof;switch(r){case R:switch(e=e.type,e){case D:case L:case B:case I:case G:case Y:return e;default:switch(e=e&&e.$$typeof,e){case M:case z:case H:case q:case N:return e;default:return r}}case A:return r}}}function Z(e){return X(e)===L}var ee=D;var re=L;var te=M;var ne=N;var oe=R;var ae=z;var ie=B;var ce=H;var ue=q;var le=A;var se=I;var fe=G;var pe=Y;var de=function(e){return Z(e)||X(e)===D};var ve=Z;var me=function(e){return X(e)===M};var ye=function(e){return X(e)===N};var be=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===R};var he=function(e){return X(e)===z};var ge=function(e){return X(e)===B};var Ee=function(e){return X(e)===H};var Pe=function(e){return X(e)===q};var Oe=function(e){return X(e)===A};var Se=function(e){return X(e)===I};var $e=function(e){return X(e)===G};var ke=function(e){return X(e)===Y};var je=function(e){return"string"===typeof e||"function"===typeof e||e===B||e===L||e===I||e===G||e===Y||e===U||"object"===typeof e&&null!==e&&(e.$$typeof===H||e.$$typeof===q||e.$$typeof===N||e.$$typeof===M||e.$$typeof===z||e.$$typeof===J||e.$$typeof===K||e.$$typeof===Q||e.$$typeof===W)};var Ce=X;var _e={AsyncMode:ee,ConcurrentMode:re,ContextConsumer:te,ContextProvider:ne,Element:oe,ForwardRef:ae,Fragment:ie,Lazy:ce,Memo:ue,Portal:le,Profiler:se,StrictMode:fe,Suspense:pe,isAsyncMode:de,isConcurrentMode:ve,isContextConsumer:me,isContextProvider:ye,isElement:be,isForwardRef:he,isFragment:ge,isLazy:Ee,isMemo:Pe,isPortal:Oe,isProfiler:Se,isStrictMode:$e,isSuspense:ke,isValidElementType:je,typeOf:Ce};var we=c(function(e){{e.exports=_e}});var xe=we.isValidElementType;var Fe=function(e){V(r,e);function r(){P(this,r);return _(this,w(r).apply(this,arguments))}$(r,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,c=r.onFocus,u=r.onBlur,l=r.isValid,s=r.isInvalid;var f=function e(r){var t=r.target,n=t.checked,o=t.value;var c=i||[];a(n?c.concat(o):c.filter(function(e){return e!==o}))};return t.Children.map(n,function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:s,checked:!!i&&i.indexOf(r)>-1,onChange:f,onFocus:c,onBlur:u,name:o})})}}]);return r}(t.Component);var Ve;try{var Te=document.createElement("style");Te.type="text/css";document.getElementsByTagName("head")[0].appendChild(Te);Ve=document.styleSheets[document.styleSheets.length-1]}catch(e){}function Re(e,r){if(Ve){if(Ve.insertRule){Ve.insertRule("".concat(e," { ").concat(r," }"),0)}else if(Ve.addRule){Ve.addRule(e,r,0)}}}var Ae=Array.isArray;var Be=Object.keys;var Ge=Object.prototype.hasOwnProperty;var Ie=typeof Element!=="undefined";function Ne(e,r){if(e===r)return true;if(e&&r&&typeof e=="object"&&typeof r=="object"){var t=Ae(e),n=Ae(r),o,a,i;if(t&&n){a=e.length;if(a!=r.length)return false;for(o=a;o--!==0;)if(!Ne(e[o],r[o]))return false;return true}if(t!=n)return false;var c=e instanceof Date,u=r instanceof Date;if(c!=u)return false;if(c&&u)return e.getTime()==r.getTime();var l=e instanceof RegExp,s=r instanceof RegExp;if(l!=s)return false;if(l&&s)return e.toString()==r.toString();var f=Be(e);a=f.length;if(a!==Be(r).length)return false;for(o=a;o--!==0;)if(!Ge.call(r,f[o]))return false;if(Ie&&e instanceof Element&&r instanceof Element)return e===r;for(o=a;o--!==0;){i=f[o];if(i==="_owner"&&e.$$typeof){continue}else{if(!Ne(e[i],r[i]))return false}}return true}return e!==e&&r!==r}var Me=function e(r,t){try{return Ne(r,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||e.number===-2146828260){console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message);return false}throw e}};var De=t.createContext({}),Le=De.Consumer,ze=De.Provider;var Ye=1;var Ue=function e(r){Ye=r};var qe=n.FormControl.Feedback;function He(e){if(e){var r=e.type;if(xe(r)){if(r.formutilType){return r.formutilType}if(typeof r==="string"&&e.props.type){return e.props.type}}return r||e}}var We=function(e){V(a,e);function a(){var e;var r;P(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}r=_(this,(e=w(a)).call.apply(e,[this].concat(n)));r.fields={};r.registerField=function(e,t){return t?r.fields[e]=t:delete r.fields[e]};r.latestValidationProps=null;r.checkHasError=function(e,r,t,n,o){switch(e){case 0:return r&&t&&n;case 1:return r&&t;case 2:return r;default:return false}};r.fetchCurrentValidationProps=function(e){var t=Object.keys(r.fields).map(function(e){return r.fields[e].$new()});var n=t.filter(function(e){return e.$invalid});var o=n.length>0;var a=t.some(function(e){return e.$dirty});var i=t.some(function(e){return e.$touched});var c=t.some(function(e){return e.$focused});var u=n.map(function(t){var n=t.$invalid,o=t.$focused,a=t.$touched,i=t.$dirty,c=t.$getFirstError;var u=r.checkHasError(e,n,i,a,o);return u&&c()}).filter(Boolean);return r.getValidationProps(e,o,a,i,c,u)};r.getValidationProps=function(e,t,n,a,i,c){var u=r.checkHasError(e,t,n,a,i);var l={className:[r.props.className,u&&"has-error",t?"is-invalid":"is-valid",n?"is-dirty":"is-pristine",a?"is-touched":"is-untouched",i?"is-focused":"is-unfocused"].filter(Boolean).join(" ")};var s={};if(u){s.isInvalid=true}if(r.props.feedback&&!t){s.isValid=true}return{groupProps:l,validationProps:s,error:u?o.createElement(qe,{type:"invalid"},Array.isArray(c)?c.map(function(e,r){return o.createElement("div",{key:r},e)}):c):null}};return r}$(a,[{key:"componentDidMount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,this.$fieldutil)}},{key:"componentWillUnmount",value:function e(){var r;(r=this.registerAncestorField)===null||r===void 0?void 0:r.call(this,this.props.name,null)}},{key:"render",value:function e(){var a=this;var c=this.props;var u=c.children,l=c.addons,s=c.label,f=c.helper,d=c.labelCol,v=c.wrapperCol,y=c.validationState,b=c.className,h=c.as,E=c.feedback,P=c.extra,O=c.noStyle,S=c.errorLevel,$=S===void 0?Ye:S,k=g(c,["children","addons","label","helper","labelCol","wrapperCol","validationState","className","as","feedback","extra","noStyle","errorLevel"]);var j=v?n.Col:t.Fragment;var C=!h&&(d||v)?n.Row:h;if(s){if(t.isValidElement(s)){if(d){s=t.cloneElement(s,m({column:true},d))}}else{s=o.createElement(n.FormLabel,Object.assign({column:!!d},d),s)}}var _=l?n.InputGroup:t.Fragment;var w=l?{size:l.size}:undefined;if(l){if(l.pre){l.pre=o.createElement(n.InputGroup.Prepend,null,t.isValidElement(l.pre)?l.pre:o.createElement(n.InputGroup.Text,null,l.pre))}if(l.end){l.end=o.createElement(n.InputGroup.Append,null,t.isValidElement(l.end)?l.end:o.createElement(n.InputGroup.Text,null,l.end))}}else{l={}}if(f&&!t.isValidElement(f)){f=o.createElement(n.FormText,{className:"text-muted"},f)}if(!c.name){var x=this.latestValidationProps=this.fetchCurrentValidationProps($),F=x.groupProps,V=x.error;Promise.resolve().then(function(){if(!Me(a.latestValidationProps,a.fetchCurrentValidationProps($))){a.forceUpdate()}});return o.createElement(ze,{value:this.registerField},o.createElement(n.FormGroup,Object.assign({},k,F,{as:C}),s,o.createElement(j,v,o.createElement(_,w,l.pre,u,l.end),V||f),P))}if(c.$memo===true){k.__DIFF__=u}var T=typeof u==="function"?u:t.Children.only(u);var R=He(T);if(R===n.FormControl){if(T.props.as==="select"&&T.props.multiple){R="multipleSelect"}}switch(R){case n.FormCheck:case n.ToggleButton:case"checkbox":case"radio":k.__TYPE__="checked";break;case"multipleSelect":k.__TYPE__="array";break;case Fe:case n.ToggleButtonGroup:if(T.props.type!=="radio"){k.__TYPE__="array"}break;case"checked":case"array":case"object":case"number":case"empty":k.__TYPE__=R;break}return o.createElement(r.EasyField,Object.assign({},k,{passUtil:"$fieldutil",render:function e(r){var u,d;var m=c.valuePropName,y=m===void 0?"value":m,b=c.changePropName,h=b===void 0?"onChange":b,E=c.focusPropName,S=E===void 0?"onFocus":E,x=c.blurPropName,F=x===void 0?"onBlur":x;var V=r.$fieldutil,A=r[h],B=r[S],G=r[F],I=r[y],N=g(r,["$fieldutil",h,S,F,y].map(p));var M=V.$invalid,D=V.$dirty,L=V.$touched,z=V.$focused,Y=V.$getFirstError;var U;switch(k.__TYPE__){case"checked":case"checkbox":case"radio":var q=c.checked,H=q===void 0?true:q,W=c.unchecked,J=W===void 0?false:W;U={checked:I===H,onChange:function e(r){var t=r&&r.target?r.target.checked:r;A(t?H:J,r)}};break;default:U=(u={onCompositionEnd:function e(r){a.isComposition=false;delete a.compositionValue;A(r)},onCompositionStart:function e(){return a.isComposition=true}},i(u,h,R==="multipleSelect"?function(e){A([].slice.call(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value}),e)}:function(e){if(a.isComposition){a.compositionValue=e.target[y];a.forceUpdate()}else{for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++){t[n-1]=arguments[n]}A.apply(void 0,[e].concat(t))}}),i(u,y,"compositionValue"in a?a.compositionValue:I),i(u,"name",k.name),u);break}var K=a.getValidationProps($,M,D,L,z,Y()),Q=K.groupProps,X=K.validationProps,Z=K.error;Object.assign(U,(d={},i(d,S,B),i(d,F,G),d),X);var ee=typeof T==="function"?T(U):t.cloneElement(T,U);return o.createElement(Le,null,function(e){if(O){a.$fieldutil=V;a.registerAncestorField=e;return ee}return o.createElement(n.FormGroup,Object.assign({},N,Q,{as:C}),s,o.createElement(j,v,o.createElement(_,w,l.pre,ee,l.end),Z||f),P)})}}))}}]);return a}(t.Component);Re(".valid-feedback:empty,.invalid-feedback:empty","display: none !important");Re(".has-error .invalid-feedback","display: block");var Je=function(e){V(r,e);function r(){P(this,r);return _(this,w(r).apply(this,arguments))}$(r,[{key:"render",value:function e(){var r=this.props,n=r.children,o=r.name,a=r.onChange,i=r.value,c=r.onFocus,u=r.onBlur,l=r.isValid,s=r.isInvalid;var f=function e(r){a(r.target.value,r)};return t.Children.map(n,function(e){var r=e.props.value;return t.cloneElement(e,{isValid:l,isInvalid:s,checked:i===r,onChange:f,onFocus:c,onBlur:u,name:o})})}}]);return r}(t.Component);Object.keys(r).forEach(function(t){if(t!=="default")Object.defineProperty(e,t,{enumerable:true,get:function(){return r[t]}})});e.CheckboxGroup=Fe;e.FormGroup=We;e.RadioGroup=Je;e.SwitchGroup=Fe;e.setErrorLevel=Ue;Object.defineProperty(e,"__esModule",{value:true})});
